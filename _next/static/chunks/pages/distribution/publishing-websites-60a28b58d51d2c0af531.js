_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[99],{"7ljp":function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return d}));var a=n("q1tI"),o=n.n(a);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var b=o.a.createContext({}),c=function(e){var t=o.a.useContext(b),n=t;return e&&(n="function"===typeof e?e(t):l(l({},t),e)),n},s=function(e){var t=c(e.components);return o.a.createElement(b.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},m=o.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,p=e.parentName,b=i(e,["components","mdxType","originalType","parentName"]),s=c(n),m=a,d=s["".concat(p,".").concat(m)]||s[m]||u[m]||r;return n?o.a.createElement(d,l(l({ref:t},b),{},{components:n})):o.a.createElement(d,l({ref:t},b))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"===typeof e||a){var r=n.length,p=new Array(r);p[0]=m;var l={};for(var i in t)hasOwnProperty.call(t,i)&&(l[i]=t[i]);l.originalType=e,l.mdxType="string"===typeof e?e:a,p[1]=l;for(var b=2;b<r;b++)p[b]=n[b];return o.a.createElement.apply(null,p)}return o.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},HALo:function(e,t,n){"use strict";function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}n.d(t,"a",(function(){return a}))},I1Ga:function(e,t,n){"use strict";n.r(t),n.d(t,"meta",(function(){return l})),n.d(t,"headings",(function(){return i})),n.d(t,"default",(function(){return c}));var a=n("HALo"),o=n("dhJC"),r=(n("q1tI"),n("7ljp")),p=["components"],l={title:"Publishing Websites"},i=[{depth:2,type:"text",title:"Creating a Build"},{depth:3,type:"text",title:"Serving Locally"},{depth:2,type:"link",title:""},{depth:2,type:"link",title:""},{depth:2,type:"link",title:""},{depth:2,type:"link",title:""},{depth:3,type:"text",title:"Manual deployment with the Netlify CDN"},{depth:3,type:"text",title:"Continuous delivery"},{depth:2,type:"link",title:""},{depth:2,type:"link",title:""},{depth:3,type:"text",title:"Setup Firebase"},{depth:3,type:"text",title:"Update package.json"}],b={meta:l,headings:i};function c(e){var t=e.components,n=Object(o.a)(e,p);return Object(r.b)("wrapper",Object(a.a)({},b,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("h2",{id:"creating-a-build"},"Creating a Build"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Optimize the assets for speed - ",Object(r.b)("inlineCode",{parentName:"li"},"npx expo-optimize")," (formerly ",Object(r.b)("inlineCode",{parentName:"li"},"expo optimize"),")"),Object(r.b)("li",{parentName:"ul"},"Bundle the project for production - ",Object(r.b)("inlineCode",{parentName:"li"},"expo build:web"),Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},"Creates a production ready static bundle in the ",Object(r.b)("inlineCode",{parentName:"li"},"web-build/")," directory. Don't edit this folder directly."),Object(r.b)("li",{parentName:"ul"},"Uses Webpack to ",Object(r.b)("a",{parentName:"li",href:"https://webpack.js.org/configuration/optimization/"},"optimize the project.")),Object(r.b)("li",{parentName:"ul"},"If you make any changes to your project, you'll need to re-build for production."),Object(r.b)("li",{parentName:"ul"},"For more help use ",Object(r.b)("inlineCode",{parentName:"li"},"expo build:web --help")),Object(r.b)("li",{parentName:"ul"},"To speed up builds you can skip the PWA asset generation with ",Object(r.b)("inlineCode",{parentName:"li"},"expo build:web --no-pwa")))),Object(r.b)("li",{parentName:"ul"},"You can now deploy or host this anywhere you like.")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Tips")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Serving your site in a subfolder? Add the path to your ",Object(r.b)("strong",{parentName:"li"},"package.json"),":")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-js"},'/* package.json */\n{\n    "homepage": "/webapp"\n}\n')),Object(r.b)("h3",{id:"serving-locally"},"Serving Locally"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",{parentName:"li",href:"https://www.npmjs.com/package/serve"},"Serve CLI"),": Quickly test how it works in production - ",Object(r.b)("inlineCode",{parentName:"li"},"npx serve web-build")),Object(r.b)("li",{parentName:"ul"},"Open ",Object(r.b)("a",{parentName:"li",href:"http://localhost:5000"},Object(r.b)("inlineCode",{parentName:"a"},"http://localhost:5000"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"This is ",Object(r.b)("inlineCode",{parentName:"strong"},"http")," only, so permissions, camera, location, and many other things won't work."))),Object(r.b)("hr",null),Object(r.b)("h2",{id:"aws-amplify-console"},Object(r.b)("a",{parentName:"h2",href:"https://console.amplify.aws"},"AWS Amplify Console")),Object(r.b)("p",null,"The AWS Amplify Console provides a Git-based workflow for continuously deploying and hosting full-stack serverless web apps. Amplify deploys your PWA from a repository instead of from your computer. In this guide, we'll use a GitHub repository. Before starting, ",Object(r.b)("a",{parentName:"p",href:"https://github.com/new"},"create a new repo on GitHub"),"."),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Add the ",Object(r.b)("a",{parentName:"p",href:"https://github.com/expo/amplify-demo/blob/master/amplify-explicit.yml"},"amplify-explicit.yml")," file to the root of your repo.")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Push your local Expo project to your GitHub repository. If you haven't pushed to GitHub yet, follow ",Object(r.b)("a",{parentName:"p",href:"https://help.github.com/en/articles/adding-an-existing-project-to-github-using-the-command-line"},"GitHub's guide to add an existing project to GitHub"),".")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Login to the ",Object(r.b)("a",{parentName:"p",href:"https://console.aws.amazon.com/amplify/home"},"Amplify Console")," and choose ",Object(r.b)("strong",{parentName:"p"},"Get started")," under ",Object(r.b)("strong",{parentName:"p"},"Deploy"),". Grant Amplify permission to read from your GitHub account or organization that owns your repo.")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"The Amplify Console will detect that the ",Object(r.b)("strong",{parentName:"p"},"amplify.yml")," file is in your repo. Choose ",Object(r.b)("strong",{parentName:"p"},"Next"),".")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Review your settings and choose ",Object(r.b)("strong",{parentName:"p"},"Save and deploy"),". Your app will now be deployed to a ",Object(r.b)("inlineCode",{parentName:"p"},"https://branchname.xxxxxx.amplifyapp.com")," URL."))),Object(r.b)("h2",{id:"vercel"},Object(r.b)("a",{parentName:"h2",href:"https://vercel.com/"},"Vercel")),Object(r.b)("p",null,"Vercel has a single-command zero-config deployment flow. You can use ",Object(r.b)("inlineCode",{parentName:"p"},"vercel")," to deploy your app for free!"),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"For more information on unlimited hosting, check out their ",Object(r.b)("a",{parentName:"p",href:"https://vercel.com/pricing"},"pricing"),".")),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},Object(r.b)("a",{parentName:"p",href:"https://vercel.com/download"},"Install the Vercel CLI"),".")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Build your Expo web app with ",Object(r.b)("inlineCode",{parentName:"p"},"expo build:web"),".")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"To deploy:"))),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Run ",Object(r.b)("inlineCode",{parentName:"li"},"cd web-build")),Object(r.b)("li",{parentName:"ul"},"Run ",Object(r.b)("inlineCode",{parentName:"li"},"vercel")),Object(r.b)("li",{parentName:"ul"},"You should see a URL that you can use to view your project online.")),Object(r.b)("p",null,"Paste that URL into your browser when the build is complete, and you will see your deployed app!"),Object(r.b)("h2",{id:"surge"},Object(r.b)("a",{parentName:"h2",href:"https://surge.sh/"},"Surge")),Object(r.b)("p",null,"Install the Surge CLI if you haven\u2019t already by running ",Object(r.b)("inlineCode",{parentName:"p"},"npm install -g surge"),".\nRun the ",Object(r.b)("inlineCode",{parentName:"p"},"surge")," command, then promptly log in or create a new account."),Object(r.b)("p",null,"When asked about the project path, make sure to specify the ",Object(r.b)("inlineCode",{parentName:"p"},"web-build")," folder, for example:"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-sh"},"project path: /path/to/expo-project/web-build\n")),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"To support routers that use the HTML 5 ",Object(r.b)("inlineCode",{parentName:"p"},"pushState")," API, you'll need to rename the ",Object(r.b)("strong",{parentName:"p"},"web-build/index.html")," to ",Object(r.b)("strong",{parentName:"p"},"web/200.html")," before deploying.")),Object(r.b)("h2",{id:"netlify"},Object(r.b)("a",{parentName:"h2",href:"https://www.netlify.com/"},"Netlify")),Object(r.b)("h3",{id:"manual-deployment-with-the-netlify-cdn"},"Manual deployment with the Netlify CDN"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-sh"},"npm install netlify-cli -g\nnetlify deploy\n")),Object(r.b)("p",null,"Choose ",Object(r.b)("inlineCode",{parentName:"p"},"web-build")," as the path to deploy."),Object(r.b)("h3",{id:"continuous-delivery"},"Continuous delivery"),Object(r.b)("p",null,"With this setup Netlify will build and deploy when you push to git or open a new pull request:"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("a",{parentName:"li",href:"https://app.netlify.com/signup"},"Start a new Netlify project")),Object(r.b)("li",{parentName:"ol"},"Pick your Git hosting service and select your repository"),Object(r.b)("li",{parentName:"ol"},"Click ",Object(r.b)("inlineCode",{parentName:"li"},"Build your site"))),Object(r.b)("h2",{id:"github-pages"},Object(r.b)("a",{parentName:"h2",href:"https://pages.github.com/"},"GitHub Pages")),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"We'll use ",Object(r.b)("inlineCode",{parentName:"p"},"yarn")," but you can use ",Object(r.b)("inlineCode",{parentName:"p"},"npm")," if you want.")),Object(r.b)("p",null,"Before starting, be sure to ",Object(r.b)("a",{parentName:"p",href:"https://github.com/new"},"create a new repo on GitHub")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"TL;DR:")),Object(r.b)("p",null,"Run the following in your root dir:"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-sh"},"git init\ngit remote add origin <YOUR_GITHUB_PAGES_URL>\nyarn add -D gh-pages\n")),Object(r.b)("p",null,"Add the following to your ",Object(r.b)("strong",{parentName:"p"},"package.json"),":"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-js"},'/* package.json */\n{\n    "homepage": "http://evanbacon.github.io/expo-gh-pages",\n    "scripts": {\n        "deploy": "gh-pages -d web-build",\n        "predeploy": "expo build:web"\n    }\n}\n')),Object(r.b)("p",null,"Finally deploy with:"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-sh"},"yarn deploy\n")),Object(r.b)("hr",null),Object(r.b)("p",null,"Here are the formal instructions for deploying to GitHub Pages:"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("strong",{parentName:"li"},"Initialize a git repo"))),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"This is probably already done, but if not then you'll want to run ",Object(r.b)("inlineCode",{parentName:"p"},"git init")," and set the remote."),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",{parentName:"pre"},"$ git init\nInitialized empty Git repository in /path/to/expo-gh-pages/.git/\n")))),Object(r.b)("ol",{start:2},Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},Object(r.b)("strong",{parentName:"p"},'Add the GitHub repository as a "remote" in your local git repository')),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",{parentName:"pre"},"$ git remote add origin https://github.com/evanbacon/expo-gh-pages.git\n")),Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},"This will make it so the ",Object(r.b)("inlineCode",{parentName:"li"},"gh-pages")," package knows where you want it to deploy your app."),Object(r.b)("li",{parentName:"ul"},"It will also make it so git knows where you want it to push your source code (i.e. the commits on your ",Object(r.b)("inlineCode",{parentName:"li"},"master")," branch)."))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},Object(r.b)("strong",{parentName:"p"},"Install the ",Object(r.b)("inlineCode",{parentName:"strong"},"gh-pages"),' package as a "dev-dependency" of the app')),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",{parentName:"pre",className:"language-sh"},"yarn add -D gh-pages\n"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},Object(r.b)("strong",{parentName:"p"},"Configure your "),"package.json",Object(r.b)("strong",{parentName:"p"}," for web hosting")),Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},"At the top level, add a ",Object(r.b)("inlineCode",{parentName:"li"},"homepage")," property. Set it's value to the string ",Object(r.b)("inlineCode",{parentName:"li"},"http://{username on github, without the curly brackets}.github.io/{repo-name}"),". For example: If my GitHub name is ",Object(r.b)("inlineCode",{parentName:"li"},"evanbacon")," and my GitHub repository is ",Object(r.b)("inlineCode",{parentName:"li"},"expo-gh-pages"),", I'll asign the following:")),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",{parentName:"pre",className:"language-js"},'/* ... */\n"homepage": "http://evanbacon.github.io/expo-gh-pages"\n')),Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},"In the existing ",Object(r.b)("inlineCode",{parentName:"li"},"scripts")," property, add a ",Object(r.b)("inlineCode",{parentName:"li"},"predeploy")," property and a ",Object(r.b)("inlineCode",{parentName:"li"},"deploy")," property, each having the values shown below:")),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",{parentName:"pre",className:"language-js"},'"scripts": {\n  /* ... */\n  "deploy": "gh-pages -d web-build",\n  "predeploy": "expo build:web"\n}\n')),Object(r.b)("blockquote",{parentName:"li"},Object(r.b)("p",{parentName:"blockquote"},Object(r.b)("inlineCode",{parentName:"p"},"predeploy")," is automatically run before ",Object(r.b)("inlineCode",{parentName:"p"},"deploy"),"."))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},Object(r.b)("strong",{parentName:"p"},"Generate a ",Object(r.b)("em",{parentName:"strong"},"production build")," of your app, and deploy it to GitHub Pages.")," (2 minutes)"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",{parentName:"pre"},"$ yarn deploy\n")),Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},"Your web app is now available at the URL you set as ",Object(r.b)("inlineCode",{parentName:"li"},"homepage")," in your ",Object(r.b)("strong",{parentName:"li"},"package.json"),".")),Object(r.b)("blockquote",{parentName:"li"},Object(r.b)("p",{parentName:"blockquote"},"When you publish code to ",Object(r.b)("inlineCode",{parentName:"p"},"gh-pages"),", it will create and push the code to a branch in your repo called ",Object(r.b)("inlineCode",{parentName:"p"},"gh-pages"),". This branch will have your built code but not your development source code.")))),Object(r.b)("h2",{id:"firebase-hosting"},Object(r.b)("a",{parentName:"h2",href:"https://console.firebase.google.com/"},"Firebase Hosting")),Object(r.b)("h3",{id:"setup-firebase"},"Setup Firebase"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Create a firebase project with the ",Object(r.b)("a",{parentName:"p",href:"https://console.firebase.google.com"},"Firebase Console"),".")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Install the Firebase CLI if you haven\u2019t already by following these ",Object(r.b)("a",{parentName:"p",href:"https://firebase.google.com/docs/hosting"},"instructions"),".")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Run the ",Object(r.b)("inlineCode",{parentName:"p"},"firebase login")," command, then promptly log in.")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Run the ",Object(r.b)("inlineCode",{parentName:"p"},"firebase init")," command, select your project and hosting.")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"When asked about the public path, make sure to specify the ",Object(r.b)("inlineCode",{parentName:"p"},"web-build")," folder.")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Answer 'Configure as a single-page app (rewrite all urls to /index.html)' with 'Yes'."))),Object(r.b)("h3",{id:"update-packagejson"},"Update package.json"),Object(r.b)("p",null,"In the existing ",Object(r.b)("inlineCode",{parentName:"p"},"scripts")," property, add a ",Object(r.b)("inlineCode",{parentName:"p"},"predeploy")," property and a ",Object(r.b)("inlineCode",{parentName:"p"},"deploy")," property, each having the values shown below:"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-js"},'"scripts": {\n  /* ... */\n  "predeploy": "expo build:web",\n  "deploy-hosting": "npm run predeploy && firebase deploy --only hosting",\n}\n')),Object(r.b)("p",null,"Run the ",Object(r.b)("inlineCode",{parentName:"p"},"npm run deploy-hosting")," command to deploy."),Object(r.b)("p",null,"Open the url from the console output to check your deployment, e.g. ",Object(r.b)("a",{parentName:"p",href:"https://PROJECTNAME.firebaseapp.com"},"https://PROJECTNAME.firebaseapp.com")),Object(r.b)("p",null,"In case you want to change the header for hosting add the following config in ",Object(r.b)("inlineCode",{parentName:"p"},"hosting")," section in firebase.json:"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-js"},'  "hosting": [\n    {\n      /* ... */\n "headers": [\n        {\n          "source": "/**",\n          "headers": [\n            {\n              "key": "Cache-Control",\n              "value": "no-cache, no-store, must-revalidate"\n            }\n          ]\n        },\n        {\n          "source": "**/*.@(jpg|jpeg|gif|png|svg|webp|js|css|eot|otf|ttf|ttc|woff|woff2|font.css)",\n          "headers": [\n            {\n              "key": "Cache-Control",\n              "value": "max-age=604800"\n            }\n          ]\n        }\n      ],\n    }\n  ]\n')))}c.isMDXComponent=!0},Qetd:function(e,t,n){"use strict";var a=Object.assign.bind(Object);e.exports=a,e.exports.default=e.exports},dhJC:function(e,t,n){"use strict";function a(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}n.d(t,"a",(function(){return a}))},tQa4:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/distribution/publishing-websites",function(){return n("I1Ga")}])}},[["tQa4",1,0]]]);