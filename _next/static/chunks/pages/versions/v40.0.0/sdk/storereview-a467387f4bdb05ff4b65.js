_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[709],{1947:function(e,t,i){"use strict";i.r(t),i.d(t,"meta",(function(){return c})),i.d(t,"headings",(function(){return b})),i.d(t,"default",(function(){return u}));var n=i("HALo"),r=i("dhJC"),a=(i("q1tI"),i("7ljp")),o=i("KiYJ"),p=i("HCau"),s=i("hykZ"),l=["components"],c={title:"StoreReview",sourceCodeUrl:"https://github.com/expo/expo/tree/sdk-40/packages/expo-store-review"},b=[{depth:2,type:"text",title:"Installation"},{depth:2,type:"text",title:"API"},{depth:3,type:"inlineCode",title:"StoreReview.requestReview()"},{depth:4,type:"text",title:"Error Codes"},{depth:4,type:"text",title:"Example"},{depth:3,type:"inlineCode",title:"StoreReview.isAvailableAsync()"},{depth:4,type:"text",title:"Example"},{depth:3,type:"inlineCode",title:"StoreReview.storeUrl()"},{depth:4,type:"text",title:"Example"},{depth:3,type:"inlineCode",title:"StoreReview.hasAction()"},{depth:4,type:"text",title:"Example"},{depth:2,type:"text",title:"Error Codes"},{depth:3,type:"inlineCode",title:"E_STORE_REVIEW_UNSUPPORTED"},{depth:2,type:"text",title:"Usage"},{depth:3,type:"text",title:"Write Reviews"},{depth:4,type:"text",title:"iOS"},{depth:4,type:"text",title:"Android"}],d={meta:c,headings:b};function u(e){var t=e.components,i=Object(r.a)(e,l);return Object(a.b)("wrapper",Object(n.a)({},d,i,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"strong"},"expo-store-review"))," provides access to the ",Object(a.b)("inlineCode",{parentName:"p"},"SKStoreReviewController")," API in iOS 10.3+ devices, and ",Object(a.b)("inlineCode",{parentName:"p"},"ReviewManager")," API in Android 5.0+ allowing you to ask the user to rate your app without ever having to leave the app itself."),Object(a.b)(o.a,{src:"/static/images/store-review.png",alt:"Screenshots of the store review API in action on iOS",mdxType:"ImageSpotlight"}),Object(a.b)(s.a,{android:!0,emulator:!0,ios:!0,simulator:!0,mdxType:"PlatformsSection"}),Object(a.b)("h2",{id:"installation"},"Installation"),Object(a.b)(p.b,{packageName:"expo-store-review",mdxType:"InstallSection"}),Object(a.b)("h2",{id:"api"},"API"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-js"},"import * as StoreReview from 'expo-store-review';\n")),Object(a.b)("h3",{id:"storereviewrequestreview"},Object(a.b)("inlineCode",{parentName:"h3"},"StoreReview.requestReview()")),Object(a.b)("p",null,"In the ideal circumstance this will open a native modal and allow the user to select a star rating that will then be applied to the App Store without leaving the app.\nIf the users device is running a version of iOS lower than 10.3, or the user is on an Android version lower than 5.0, this will attempt to get the store URL and link the user to it."),Object(a.b)("h4",{id:"error-codes"},"Error Codes"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",{parentName:"li",href:"/versions/v40.0.0/sdk/storereview/#err_store_review_unsupported"},Object(a.b)("inlineCode",{parentName:"a"},"ERR_STORE_REVIEW_UNSUPPORTED")))),Object(a.b)("h4",{id:"example"},"Example"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-js"},"StoreReview.requestReview();\n")),Object(a.b)("h3",{id:"storereviewisavailableasync"},Object(a.b)("inlineCode",{parentName:"h3"},"StoreReview.isAvailableAsync()")),Object(a.b)("p",null,"Determines if the platform has the capabilities to use ",Object(a.b)("inlineCode",{parentName:"p"},"StoreReview.requestReview()"),". On iOS, this will return ",Object(a.b)("inlineCode",{parentName:"p"},"true")," if the device is running iOS 10.3+. On Android, this will return ",Object(a.b)("inlineCode",{parentName:"p"},"true")," if the device is running Android 5.0+. On Web, this will return ",Object(a.b)("inlineCode",{parentName:"p"},"false"),"."),Object(a.b)("h4",{id:"example-1"},"Example"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-js"},"StoreReview.isAvailableAsync();\n")),Object(a.b)("h3",{id:"storereviewstoreurl"},Object(a.b)("inlineCode",{parentName:"h3"},"StoreReview.storeUrl()")),Object(a.b)("p",null,"This uses the ",Object(a.b)("inlineCode",{parentName:"p"},"Constants")," API to get the ",Object(a.b)("inlineCode",{parentName:"p"},"Constants.manifest.ios.appStoreUrl")," on iOS, or the ",Object(a.b)("inlineCode",{parentName:"p"},"Constants.manifest.android.playStoreUrl")," on Android."),Object(a.b)("p",null,"In the bare workflow, this will return ",Object(a.b)("inlineCode",{parentName:"p"},"null"),"."),Object(a.b)("h4",{id:"example-2"},"Example"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-js"},"const url = StoreReview.storeUrl();\n")),Object(a.b)("h3",{id:"storereviewhasaction"},Object(a.b)("inlineCode",{parentName:"h3"},"StoreReview.hasAction()")),Object(a.b)("p",null,"This returns a promise that fulfills to is ",Object(a.b)("inlineCode",{parentName:"p"},"true")," if ",Object(a.b)("inlineCode",{parentName:"p"},"StoreReview.requestReview()")," is capable directing the user to some kind of store review flow. If the app config (",Object(a.b)("strong",{parentName:"p"},"app.json"),") does not contain store URLs and native store review capabilities are not available then the promise will fulfill to ",Object(a.b)("inlineCode",{parentName:"p"},"false"),"."),Object(a.b)("h4",{id:"example-3"},"Example"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-js"},"if (await StoreReview.hasAction()) {\n  // you can call StoreReview.requestReview()\n}\n")),Object(a.b)("h2",{id:"error-codes-1"},"Error Codes"),Object(a.b)("h3",{id:"e_store_review_unsupported"},Object(a.b)("inlineCode",{parentName:"h3"},"E_STORE_REVIEW_UNSUPPORTED")),Object(a.b)("p",null,"Requesting an App Store review is not supported on this device. The device must be iOS 10.3 or greater. Android and web are not supported. Be sure to check for support with ",Object(a.b)("inlineCode",{parentName:"p"},"isAvailableAsync()")," to avoid this error."),Object(a.b)("hr",null),Object(a.b)("h2",{id:"usage"},"Usage"),Object(a.b)("p",null,"It is important that you follow the ",Object(a.b)("a",{parentName:"p",href:"https://developer.apple.com/ios/human-interface-guidelines/system-capabilities/ratings-and-reviews/"},"Human Interface Guidelines")," for iOS and ",Object(a.b)("a",{parentName:"p",href:"https://developer.android.com/guide/playcore/in-app-review#when-to-request"},"Guidelines")," for Android when using this API."),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"Specifically:")),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"Don't call ",Object(a.b)("inlineCode",{parentName:"li"},"StoreReview.requestReview()")," from a button - instead try calling it after the user has finished some signature interaction in the app."),Object(a.b)("li",{parentName:"ul"},"Don't spam the user"),Object(a.b)("li",{parentName:"ul"},"Don't request a review when the user is doing something time sensitive like navigating."),Object(a.b)("li",{parentName:"ul"},"Don't ask the user any questions before or while presenting the rating button or card.")),Object(a.b)("h3",{id:"write-reviews"},"Write Reviews"),Object(a.b)("h4",{id:"ios"},"iOS"),Object(a.b)("p",null,'You can redirect someone to the "Write a Review" screen for an app in the iOS App Store by using the query parameter ',Object(a.b)("inlineCode",{parentName:"p"},"action=write-review"),". For example:"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-ts"},"const itunesItemId = 982107779;\n// Open the iOS App Store in the browser -> redirects to App Store on iOS\nLinking.openURL(`https://apps.apple.com/app/apple-store/id${itunesItemId}?action=write-review`);\n// Open the iOS App Store directly\nLinking.openURL(\n  `itms-apps://itunes.apple.com/app/viewContentsUserReviews/id${itunesItemId}?action=write-review`\n);\n")),Object(a.b)("h4",{id:"android"},"Android"),Object(a.b)("p",null,"There is no equivalent redirect on Android, you can still open the Play Store to the reviews sections using the query parameter ",Object(a.b)("inlineCode",{parentName:"p"},"showAllReviews=true")," like this:"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-ts"},"const androidPackageName = 'host.exp.exponent';\n// Open the Android Play Store in the browser -> redirects to Play Store on Android\nLinking.openURL(\n  `https://play.google.com/store/apps/details?id=${androidPackageName}&showAllReviews=true`\n);\n// Open the Android Play Store directly\nLinking.openURL(`market://details?id=${androidPackageName}&showAllReviews=true`);\n")))}u.isMDXComponent=!0},"32Gj":function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/versions/v40.0.0/sdk/storereview",function(){return i("1947")}])},KiYJ:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("cpVT"),r=i("3zh3"),a=(i("q1tI"),i("AeFk"));function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function p(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){Object(n.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function s(e){var t=e.alt,i=e.src,n=e.style,o=e.containerStyle;return Object(a.c)("div",{style:p({textAlign:"center",backgroundColor:r.theme.background.secondary,paddingTop:10,paddingBottom:10,marginTop:20,marginBottom:20},o)},Object(a.c)("img",{src:i,alt:t,style:n}))}},cpVT:function(e,t,i){"use strict";function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,"a",(function(){return n}))}},[["32Gj",1,0,2,3,4,5,6]]]);