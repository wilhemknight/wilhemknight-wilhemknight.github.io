_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[1317],{I0q5:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var o=n("z7pX"),a=n("H+61"),i=n("UlJF"),r=n("+Css"),c=n("7LId"),s=n("VIvw"),l=n("iHvq"),p=n("cpVT"),u=n("q1tI"),d=n("ufKf"),b=n("3zh3"),m=n("AeFk"),h=function(e){var t=e.size,n=void 0===t?24:t,o=e.stroke,a=void 0===o?b.palette.dark.white:o;return Object(m.c)("svg",{"aria-label":"check",width:n,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object(m.c)("path",{d:"M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6m4-3h6v6m-11 5L21 3",stroke:a,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))},O=n("5BX9");function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return Object(s.a)(this,n)}}var j="v".concat(n("kiQV").version),g=function(e){Object(c.a)(n,e);var t=f(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return e=t.call.apply(t,[this].concat(c)),Object(p.a)(Object(r.a)(e),"contentRef",u.createRef()),Object(p.a)(Object(r.a)(e),"state",{ready:!1}),Object(p.a)(Object(r.a)(e),"getSelectedDocsVersion",(function(){var t=e.context.version;return"latest"===t?j:t})),Object(p.a)(Object(r.a)(e),"getSnackSdkVersion",(function(){var t=e.getSelectedDocsVersion();return"unversioned"===t&&(t=j),t.replace("v","")})),Object(p.a)(Object(r.a)(e),"getExamplesPath",(function(){return"".concat(document.location.origin,"/static/examples/").concat(e.getSelectedDocsVersion())})),Object(p.a)(Object(r.a)(e),"getDependencies",(function(){return Object(o.a)(e.props.dependencies).join(",")})),Object(p.a)(Object(r.a)(e),"getCode",(function(){return(e.contentRef.current&&e.contentRef.current.textContent||"").replace(/%%placeholder-start%%.*%%placeholder-end%%/g,"")})),e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.setState({ready:!0})}},{key:"render",value:function(){return Object(m.c)("div",null,Object(m.c)("div",{ref:this.contentRef,style:this.props.contentHidden?{display:"none"}:void 0},this.props.children),Object(m.c)("form",{action:d.a,method:"POST",target:"_blank"},Object(m.c)("input",{type:"hidden",name:"platform",value:this.props.defaultPlatform||"android"}),Object(m.c)("input",{type:"hidden",name:"name",value:this.props.label||"Example"}),Object(m.c)("input",{type:"hidden",name:"dependencies",value:this.getDependencies()}),Object(m.c)("input",{type:"hidden",name:"sdkVersion",value:this.getSnackSdkVersion()}),this.props.platforms&&Object(m.c)("input",{type:"hidden",name:"supportedPlatforms",value:this.props.platforms.join(",")}),this.state.ready&&Object(m.c)("input",{type:"hidden",name:"files",value:JSON.stringify(Object(d.b)({templateId:this.props.templateId,code:this.getCode(),files:this.props.files,baseURL:this.getExamplesPath()}))}),Object(m.c)("button",{className:"snack-inline-example-button",disabled:!this.state.ready},Object(m.c)(h,{size:16})," ",this.props.buttonTitle||"Try this example on Snack")))}}]),n}(u.Component);Object(p.a)(g,"contextType",O.a),Object(p.a)(g,"defaultProps",{dependencies:[]})},QNcs:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/versions/v44.0.0/sdk/location",function(){return n("Xej8")}])},Xej8:function(e,t,n){"use strict";n.r(t),n.d(t,"meta",(function(){return u})),n.d(t,"headings",(function(){return d})),n.d(t,"default",(function(){return m}));var o=n("HALo"),a=n("dhJC"),i=(n("q1tI"),n("7ljp")),r=n("3Ukx"),c=n("HCau"),s=n("hykZ"),l=n("I0q5"),p=["components"],u={title:"Location",sourceCodeUrl:"https://github.com/expo/expo/tree/sdk-44/packages/expo-location"},d=[{depth:2,type:"text",title:"Installation"},{depth:2,type:"text",title:"Configuration"},{depth:3,type:"text",title:"Background Location Methods"},{depth:3,type:"text",title:"Geofencing Methods"},{depth:2,type:"text",title:"Usage"},{depth:2,type:"text",title:"Enabling Emulator Location"},{depth:3,type:"text",title:"iOS Simulator"},{depth:3,type:"text",title:"Android Emulator"},{depth:2,type:"text",title:"API"}],b={meta:u,headings:d};function m(e){var t=e.components,n=Object(a.a)(e,p);return Object(i.b)("wrapper",Object(o.a)({},b,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},Object(i.b)("inlineCode",{parentName:"strong"},"expo-location"))," allows reading geolocation information from the device. Your app can poll for the current location or subscribe to location update events."),Object(i.b)(s.a,{android:!0,emulator:!0,ios:!0,simulator:!0,web:!0,mdxType:"PlatformsSection"}),Object(i.b)("h2",{id:"installation"},"Installation"),Object(i.b)(c.b,{packageName:"expo-location",mdxType:"InstallSection"}),Object(i.b)("h2",{id:"configuration"},"Configuration"),Object(i.b)("p",null,"In Managed and bare apps, ",Object(i.b)("inlineCode",{parentName:"p"},"Location")," requires ",Object(i.b)("inlineCode",{parentName:"p"},"Permissions.LOCATION"),"."),Object(i.b)("h3",{id:"background-location-methods"},"Background Location Methods"),Object(i.b)("p",null,"In order to use Background Location methods, the following requirements apply:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"Permissions.LOCATION")," permission must be granted. On iOS it must be granted with ",Object(i.b)("inlineCode",{parentName:"li"},"Always")," option \u2014 see ",Object(i.b)("a",{parentName:"li",href:"/versions/v44.0.0/sdk/permissions/#permissionslocation"},"Permissions.LOCATION")," for more details."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"(",Object(i.b)("em",{parentName:"strong"},"iOS only"),")")," ",Object(i.b)("inlineCode",{parentName:"li"},'"location"')," background mode must be specified in ",Object(i.b)("strong",{parentName:"li"},"Info.plist")," file. See ",Object(i.b)("a",{parentName:"li",href:"/versions/v44.0.0/sdk/task-manager/#configuration"},"background tasks configuration guide"),". "),Object(i.b)("li",{parentName:"ul"},"Background location task must be defined in the top-level scope, using ",Object(i.b)("a",{parentName:"li",href:"/versions/v44.0.0/sdk/task-manager/#taskmanagerdefinetasktaskname-task"},"TaskManager.defineTask"),".")),Object(i.b)("h3",{id:"geofencing-methods"},"Geofencing Methods"),Object(i.b)("p",null,"In order to use Geofencing methods, the following requirements apply:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"Permissions.LOCATION")," permission must be granted. On iOS it must be granted with ",Object(i.b)("inlineCode",{parentName:"li"},"Always")," option \u2014 see ",Object(i.b)("a",{parentName:"li",href:"/versions/v44.0.0/sdk/permissions/#permissionslocation"},"Permissions.LOCATION")," for more details."),Object(i.b)("li",{parentName:"ul"},"Geofencing task must be defined in the top-level scope, using ",Object(i.b)("a",{parentName:"li",href:"/versions/v44.0.0/sdk/task-manager/#taskmanagerdefinetasktaskname-task"},"TaskManager.defineTask"),"."),Object(i.b)("li",{parentName:"ul"},"On iOS, there is a ",Object(i.b)("a",{parentName:"li",href:"https://developer.apple.com/documentation/corelocation/monitoring_the_user_s_proximity_to_geographic_regions"},"limit of 20")," ",Object(i.b)("inlineCode",{parentName:"li"},"regions")," that can be simultaneously monitored.")),Object(i.b)("blockquote",null,Object(i.b)("p",{parentName:"blockquote"},Object(i.b)("strong",{parentName:"p"},"Note:")," On Android, This module requires the permissions for approximate and exact device location. It also needs the foreground service permission to subscribe to location updates, while the app is in use. The ",Object(i.b)("inlineCode",{parentName:"p"},"ACCESS_COARSE_LOCATION"),", ",Object(i.b)("inlineCode",{parentName:"p"},"ACCESS_FINE_LOCATION"),", and ",Object(i.b)("inlineCode",{parentName:"p"},"FOREGROUND_SERVICE")," permissions are automatically added.")),Object(i.b)("blockquote",null,Object(i.b)("p",{parentName:"blockquote"},Object(i.b)("strong",{parentName:"p"},"Note:")," On Android, you have to ",Object(i.b)("a",{parentName:"p",href:"https://support.google.com/googleplay/android-developer/answer/9799150?hl=en"},"submit your app for review and request access to use the background location permission"),".")),Object(i.b)("h2",{id:"usage"},"Usage"),Object(i.b)("p",null,"If you're using the iOS or Android Emulators, ensure that ",Object(i.b)("a",{parentName:"p",href:"/versions/v44.0.0/sdk/location/#enabling-emulator-location"},"Location is enabled"),"."),Object(i.b)(l.a,{label:"Location",dependencies:["expo-location","expo-constants"],mdxType:"SnackInline"},Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-jsx"},"import React, { useState, useEffect } from 'react';\nimport { Platform, Text, View, StyleSheet } from 'react-native';\n/* @hide */\nimport Constants from 'expo-constants';\n/* @end */\nimport * as Location from 'expo-location';\n\nexport default function App() {\n  const [location, setLocation] = useState(null);\n  const [errorMsg, setErrorMsg] = useState(null);\n\n  useEffect(() => {\n    (async () => {\n      /* @hide */\n      if (Platform.OS === 'android' && !Constants.isDevice) {\n        setErrorMsg(\n          'Oops, this will not work on Snack in an Android emulator. Try it on your device!'\n        );\n        return;\n      }\n      /* @end */\n      let { status } = await Location.requestForegroundPermissionsAsync();\n      if (status !== 'granted') {\n        setErrorMsg('Permission to access location was denied');\n        return;\n      }\n\n      let location = await Location.getCurrentPositionAsync({});\n      setLocation(location);\n    })();\n  }, []);\n\n  let text = 'Waiting..';\n  if (errorMsg) {\n    text = errorMsg;\n  } else if (location) {\n    text = JSON.stringify(location);\n  }\n\n  return (\n    <View style={styles.container}>\n      <Text style={styles.paragraph}>{text}</Text>\n    </View>\n  );\n}\n\n/* @hide const styles = StyleSheet.create({ ... }); */\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    padding: 20,\n  },\n  paragraph: {\n    fontSize: 18,\n    textAlign: 'center',\n  },\n});\n/* @end */\n"))),Object(i.b)("h2",{id:"enabling-emulator-location"},"Enabling Emulator Location"),Object(i.b)("h3",{id:"ios-simulator"},"iOS Simulator"),Object(i.b)("p",null,'With Simulator open, go to Debug > Location and choose any option besides "None" (obviously).'),Object(i.b)("p",null,Object(i.b)("img",{parentName:"p",src:"/static/images/ios-simulator-location.png",alt:"iOS Simulator location"})),Object(i.b)("h3",{id:"android-emulator"},"Android Emulator"),Object(i.b)("p",null,'Open Android Studio, and launch your AVD in the emulator. Then, on the options bar for your device, click the icon for "More" and navigate to the "Location" tab.'),Object(i.b)("p",null,Object(i.b)("img",{parentName:"p",src:"/static/images/android-emulator-location.png",alt:"Android Simulator location"})),Object(i.b)("p",null,'If you don\'t receive the locations in the emulator, you may have to turn off "Improve Location Accuracy" in Settings - Location in the emulator. This will turn off Wi-Fi location and only use GPS. Then you can manipulate the location with GPS data through the emulator.'),Object(i.b)("h2",{id:"api"},"API"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-js"},"import * as Location from 'expo-location';\n")),Object(i.b)(r.a,{packageName:"expo-location",apiName:"Location",mdxType:"APISection"}))}m.isMDXComponent=!0},ufKf:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));var o="https://snack.expo.dev";function a(e){var t=e.templateId,n=e.code,o=e.files,a=e.baseURL,i={};return o&&Object.keys(o).forEach((function(e){var t=o[e],n=/\.(jsx?|tsx?|json|md)$/i.test(e);i[e]=n?{type:"CODE",url:t.match(/^https?:\/\//)?t:"".concat(a,"/").concat(t)}:{type:"ASSET",contents:t}})),t?i["App.js"]={type:"CODE",url:"".concat(a,"/").concat(t,".js")}:n&&(i["App.js"]={type:"CODE",contents:n}),i}}},[["QNcs",1,0,2,3,4,5,6,7,8,9,10,11,12,13,14]]]);