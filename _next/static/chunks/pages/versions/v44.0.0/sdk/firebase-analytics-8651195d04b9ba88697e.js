_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[1298],{"I/zF":function(e,t,n){"use strict";n.r(t),n.d(t,"meta",(function(){return c})),n.d(t,"headings",(function(){return b})),n.d(t,"default",(function(){return d}));var a=n("HALo"),o=n("dhJC"),i=(n("q1tI"),n("7ljp")),r=n("3Ukx"),s=n("HCau"),p=n("hykZ"),l=(n("3WCi"),["components"]),c={title:"FirebaseAnalytics",sourceCodeUrl:"https://github.com/expo/expo/tree/sdk-44/packages/expo-firebase-analytics"},b=[{depth:2,type:"text",title:"Installation"},{depth:2,type:"text",title:"Configuration"},{depth:2,type:"text",title:"Expo Go: Limitations & configuration"},{depth:2,type:"text",title:"Optional: Enable AdSupport in Bare Workflow"},{depth:1,type:"text",title:"Examples"},{depth:2,type:"text",title:"How do people use my app?"},{depth:2,type:"text",title:"React Navigation"},{depth:2,type:"text",title:"API"}],u={meta:c,headings:b};function d(e){var t=e.components,n=Object(o.a)(e,l);return Object(i.b)("wrapper",Object(a.a)({},u,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("blockquote",null,Object(i.b)("p",{parentName:"blockquote"},Object(i.b)("strong",{parentName:"p"},"This is the only Firebase Analytics package for React Native that has universal platform support (iOS, Android, Web, and Electron)."))),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},Object(i.b)("inlineCode",{parentName:"strong"},"expo-firebase-analytics"))," enables the use of native Google Analytics for Firebase. Google Analytics for Firebase is a free app measurement solution that provides insight on app usage and user engagement.\nLearn more in the official ",Object(i.b)("a",{parentName:"p",href:"https://firebase.google.com/docs/analytics/"},"Firebase Docs"),"."),Object(i.b)(p.a,{android:!0,emulator:!0,ios:!0,simulator:!0,web:!0,mdxType:"PlatformsSection"}),Object(i.b)("h2",{id:"installation"},"Installation"),Object(i.b)(s.b,{packageName:"expo-firebase-analytics",mdxType:"InstallSection"}),Object(i.b)("p",null,"When using the web-platform, you'll also need to run ",Object(i.b)("inlineCode",{parentName:"p"},"expo install firebase"),", which install the Firebase JS SDK."),Object(i.b)("h2",{id:"configuration"},"Configuration"),Object(i.b)("p",null,"To use this package, the native Firebase configurations need to be added to your app.\n",Object(i.b)("a",{parentName:"p",href:"/../../../../../../guides/setup-native-firebase"},"Please follow this guide on how to set up native Firebase.")),Object(i.b)("h2",{id:"expo-go-limitations--configuration"},"Expo Go: Limitations & configuration"),Object(i.b)("p",null,"The use of Native Firebase Analytics requires that the google-services configuration is bundled and linked into your app. Since Expo Go loads projects on demand, it does not have the google-services configuration linked into its app-bundle."),Object(i.b)("p",null,"Instead, Expo Go relies on a JavaScript-based implementation of Firebase Analytics to log events. This means that certain native life-cycle events are not recorded in the standard client, but you can still use ",Object(i.b)("inlineCode",{parentName:"p"},"logEvent")," to record events."),Object(i.b)("p",null,"You may want to use Firebase Analytics in Expo Go to verify that you are logging events at the time you intend to and with the data that you want to attach without having to do a standalone app build. To set this up, ensure that the Firebase web configuration is set in ",Object(i.b)("strong",{parentName:"p"},"app.json")," and that ",Object(i.b)("inlineCode",{parentName:"p"},"measurementId")," exists in your firebase config. If ",Object(i.b)("inlineCode",{parentName:"p"},"measurementId")," doesn't exist, then you need to enable or update Google Analytics in your Firebase project."),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"app.json")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-json"},'{\n  "expo": {\n    "web": {\n      "config": {\n        "firebase": {\n          "apiKey": "AIzaXXXXXXXX-xxxxxxxxxxxxxxxxxxx",\n          ...\n          "measurementId": "G-XXXXXXXXX"\n        }\n      }\n    }\n  }\n}\n')),Object(i.b)("blockquote",null,Object(i.b)("p",{parentName:"blockquote"},"This limitation only applies to the Expo Go app in the App and Play stores; standalone builds, custom clients & bare apps support the full native Firebase Analytics experience.")),Object(i.b)("h2",{id:"optional-enable-adsupport-in-bare-workflow"},"Optional: Enable AdSupport in Bare Workflow"),Object(i.b)("p",null,"To get extra features like ",Object(i.b)("inlineCode",{parentName:"p"},"audiences"),", ",Object(i.b)("inlineCode",{parentName:"p"},"campaign attribution"),", and some ",Object(i.b)("inlineCode",{parentName:"p"},"user properties"),", such as ",Object(i.b)("inlineCode",{parentName:"p"},"Age")," and ",Object(i.b)("inlineCode",{parentName:"p"},"Interests"),", you will need to include AdSupport. This is currently only possible in the Bare Workflow and not enabled by default because Apple & Google are strict with allowing apps to use this library."),Object(i.b)("p",null,"To enable the AdSupport framework:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"In your Xcode project, select your project's target"),Object(i.b)("li",{parentName:"ul"},"Select the General tab for your target"),Object(i.b)("li",{parentName:"ul"},"Expand the Linked Frameworks and Libraries section"),Object(i.b)("li",{parentName:"ul"},"Click ",Object(i.b)("inlineCode",{parentName:"li"},"+")," to add a framework"),Object(i.b)("li",{parentName:"ul"},"Select ",Object(i.b)("inlineCode",{parentName:"li"},"AdSupport.framework"))),Object(i.b)("p",null,Object(i.b)("a",{parentName:"p",href:"https://firebase.google.com/support/guides/analytics-adsupport"},"Learn more in the Firebase Docs")),Object(i.b)("h1",{id:"examples"},"Examples"),Object(i.b)("h2",{id:"how-do-people-use-my-app"},"How do people use my app?"),Object(i.b)("p",null,"You can gain deeper insight into what works and what doesn't by using the ",Object(i.b)("inlineCode",{parentName:"p"},"logEvent")," property. Also it's just a lot of fun to see that people actually use the features you work hard on! \ud83d\ude0d"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-ts"},"/*\n * Say we are in a tinder clone, and a user presses the card to view more\n * information on a user. We should track this event so we can see if people\n * are even using it.\n *\n * If lots of users are opening the card then swiping through photos, just\n * to dismiss again, then we should consider making it possible to look\n * through photos without having to enter the profile.\n */\nonPressProfileButton = uid => {\n  Analytics.logEvent('ExpandProfile', {\n    /*\n     * We want to know if the user came from from the swipe card as\n     * opposed to from chat or a deep link.\n     */\n    sender: 'card',\n    /*\n     * This may be too specific and not very useful, but maybe down the line * we could investigate why a certain user is more popular than others.\n     */\n    user: uid,\n    /*\n     * We can use this information later to compare against other events.\n     */\n    screen: 'profile',\n    purpose: 'Viewing more info on a user',\n  });\n};\n")),Object(i.b)("h2",{id:"react-navigation"},"React Navigation"),Object(i.b)("p",null,"You can track the screens your users are interacting with by integrating the best navigation library: ",Object(i.b)("inlineCode",{parentName:"p"},"react-navigation")),Object(i.b)("p",null,Object(i.b)("a",{parentName:"p",href:"https://reactnavigation.org/docs/en/screen-tracking.html"},"Read more about how this works")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-js"},"import React from 'react';\n// Import Navigation\nimport { createBottomTabNavigator } from 'react-navigation';\n// Import Firebase\nimport * as Analytics from 'expo-firebase-analytics';\n// Import some screens\nimport HomeScreen from '../screens/HomeScreen';\nimport ProfileScreen from '../screens/ProfileScreen';\n// Create a generic Navigator\nconst AppNavigator = createBottomTabNavigator({\n  // The name `Profile` or `Home` are what will appear in Firebase Analytics.\n  Profile: ProfileScreen,\n  Home: HomeScreen,\n});\n// Get the current screen from the navigation state\nfunction getActiveRouteName(navigationState) {\n  if (!navigationState) return null;\n  const route = navigationState.routes[navigationState.index];\n  // Parse the nested navigators\n  if (route.routes) return getActiveRouteName(route);\n  return route.routeName;\n}\n\nexport default () => (\n  <AppNavigator\n    onNavigationStateChange={(prevState, currentState) => {\n      const currentScreen = getActiveRouteName(currentState);\n      const prevScreen = getActiveRouteName(prevState);\n      if (prevScreen !== currentScreen) {\n        // Update Firebase with the name of your screen\n        Analytics.setCurrentScreen(currentScreen);\n      }\n    }}\n  />\n);\n")),Object(i.b)("h2",{id:"api"},"API"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-js"},"import * as Analytics from 'expo-firebase-analytics';\n")),Object(i.b)("p",null,"To use web analytics, you'll also need to install the peer dependency ",Object(i.b)("strong",{parentName:"p"},"firebase")," with ",Object(i.b)("inlineCode",{parentName:"p"},"expo install firebase"),"."),Object(i.b)(r.a,{packageName:"expo-firebase-analytics",apiName:"Analytics",mdxType:"APISection"}))}d.isMDXComponent=!0},biTg:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/versions/v44.0.0/sdk/firebase-analytics",function(){return n("I/zF")}])}},[["biTg",1,0,2,3,4,5,6,7,8,9,10,11,12,13,14]]]);