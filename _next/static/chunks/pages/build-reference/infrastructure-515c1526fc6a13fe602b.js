_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[64],{"7ljp":function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return d}));var a=n("q1tI"),r=n.n(a);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var o=r.a.createContext({}),u=function(e){var t=r.a.useContext(o),n=t;return e&&(n="function"===typeof e?e(t):b(b({},t),e)),n},p=function(e){var t=u(e.components);return r.a.createElement(o.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},s=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,i=e.parentName,o=c(e,["components","mdxType","originalType","parentName"]),p=u(n),s=a,d=p["".concat(i,".").concat(s)]||p[s]||m[s]||l;return n?r.a.createElement(d,b(b({ref:t},o),{},{components:n})):r.a.createElement(d,b({ref:t},o))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"===typeof e||a){var l=n.length,i=new Array(l);i[0]=s;var b={};for(var c in t)hasOwnProperty.call(t,c)&&(b[c]=t[c]);b.originalType=e,b.mdxType="string"===typeof e?e:a,i[1]=b;for(var o=2;o<l;o++)i[o]=n[o];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,n)}s.displayName="MDXCreateElement"},HALo:function(e,t,n){"use strict";function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}n.d(t,"a",(function(){return a}))},Qetd:function(e,t,n){"use strict";var a=Object.assign.bind(Object);e.exports=a,e.exports.default=e.exports},RjfX:function(e,t,n){"use strict";n.r(t),n.d(t,"meta",(function(){return b})),n.d(t,"headings",(function(){return c})),n.d(t,"default",(function(){return u}));var a=n("HALo"),r=n("dhJC"),l=(n("q1tI"),n("7ljp")),i=["components"],b={title:"Build server infrastructure",sidebar_title:"Server infrastructure"},c=[{depth:2,type:"text",title:"Configuring build environment"},{depth:2,type:"text",title:"Android build server configurations"},{depth:4,type:"inlineCode",title:"Image  ubuntu-20.04-jdk-11-ndk-r21e  (alias  latest )"},{depth:4,type:"inlineCode",title:"Image  ubuntu-20.04-jdk-8-ndk-r21e"},{depth:4,type:"inlineCode",title:"Image  ubuntu-18.04-jdk-11-ndk-r19c"},{depth:4,type:"inlineCode",title:"Image  ubuntu-18.04-jdk-8-ndk-r19c  (alias  default )"},{depth:2,type:"text",title:"iOS build server configurations"},{depth:4,type:"inlineCode",title:"Image  macos-monterey-12.3-xcode-13.3  (alias  latest )"},{depth:4,type:"inlineCode",title:"Image  macos-monterey-12.1-xcode-13.2"},{depth:4,type:"inlineCode",title:"Image  macos-big-sur-11.4-xcode-13.0  (alias  default )"},{depth:4,type:"inlineCode",title:"Image  macos-big-sur-11.4-xcode-12.5"}],o={meta:b,headings:c};function u(e){var t=e.components,n=Object(r.a)(e,i);return Object(l.b)("wrapper",Object(a.a)({},o,n,{components:t,mdxType:"MDXLayout"}),Object(l.b)("p",null,"This document describes the current build infrastructure as of February 1, 2022. It is likely to change over time, and this document will be updated."),Object(l.b)("h2",{id:"configuring-build-environment"},"Configuring build environment"),Object(l.b)("p",null,"Images for each platform have one specific version of Node, yarn, CocoaPods, Xcode, Ruby, Fastlane, and so on. You can override some of the versions in ",Object(l.b)("a",{parentName:"p",href:"/build/eas-json"},"eas.json"),". If there's no dedicated configuration option you're looking for, you can use ",Object(l.b)("a",{parentName:"p",href:"/build-reference/how-tos/#eas-build-specific-npm-hooks"},"npm hooks")," to install or update any system dependencies with ",Object(l.b)("inlineCode",{parentName:"p"},"apt-get")," or ",Object(l.b)("inlineCode",{parentName:"p"},"brew"),". Please take into account that those customizations are applied during the build and will increase your build times."),Object(l.b)("p",null,"When selecting an image for the build you can use the full name provided below or one of the aliases: ",Object(l.b)("inlineCode",{parentName:"p"},"default"),", ",Object(l.b)("inlineCode",{parentName:"p"},"latest"),"."),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"The use of a specific name guarantees the consistent environment with only minor updates."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"default")," alias will be assigned to the environment that most closely resembles the configuration used for Expo SDK development."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"latest")," alias will be assigned to the image with the most up to date versions of the software.")),Object(l.b)("blockquote",null,Object(l.b)("p",{parentName:"blockquote"},Object(l.b)("strong",{parentName:"p"},"Note:")),Object(l.b)("ul",{parentName:"blockquote"},Object(l.b)("li",{parentName:"ul"},"If you have a bare workflow project: your build is going to use the ",Object(l.b)("inlineCode",{parentName:"li"},"default")," image unless you provide ",Object(l.b)("inlineCode",{parentName:"li"},"image")," in ",Object(l.b)("strong",{parentName:"li"},"eas.json"),"."),Object(l.b)("li",{parentName:"ul"},"If you have a managed workflow project: your build is going to use an automatically chosen image, unless you provide ",Object(l.b)("inlineCode",{parentName:"li"},"image")," in ",Object(l.b)("strong",{parentName:"li"},"eas.json"),"."))),Object(l.b)("h2",{id:"android-build-server-configurations"},"Android build server configurations"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},"Android workers run on Kubernetes in an isolated environment"),Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},"Every build gets its own container running on a dedicated Kubernetes node"),Object(l.b)("li",{parentName:"ul"},"Build resources: 4 CPU, 12 GB RAM"))),Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},"NPM cache deployed with Kubernetes. ",Object(l.b)("a",{parentName:"p",href:"/build-reference/caching/#javascript-dependencies"},"Learn more"))),Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},"Maven cache deployed with Kubernetes. ",Object(l.b)("a",{parentName:"p",href:"/build-reference/caching/#android-dependencies"},"Learn more"))),Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},"Global Gradle configuration in ",Object(l.b)("inlineCode",{parentName:"p"},"~/.gradle/gradle.properties"),":"),Object(l.b)("pre",{parentName:"li"},Object(l.b)("code",{parentName:"pre",className:"language-jsx"},"org.gradle.jvmargs=-Xmx14g -XX:MaxPermSize=512m -XX:+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF-8\norg.gradle.parallel=true\norg.gradle.configureondemand=true\norg.gradle.daemon=false\n"))),Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},Object(l.b)("inlineCode",{parentName:"p"},"~/.npmrc")),Object(l.b)("pre",{parentName:"li"},Object(l.b)("code",{parentName:"pre"},"registry=http://npm-cache-service.worker-infra-production.svc.cluster.local:4873\n"))),Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},Object(l.b)("inlineCode",{parentName:"p"},"~/.yarnrc.yml")),Object(l.b)("pre",{parentName:"li"},Object(l.b)("code",{parentName:"pre"},'unsafeHttpWhitelist:\n  - "*"\nnpmRegistryServer: "http://npm-cache-service.worker-infra-production.svc.cluster.local:4873"\nenableImmutableInstalls: false\n')))),Object(l.b)("h4",{id:"image-ubuntu-2004-jdk-11-ndk-r21e-alias-latest"},"Image ",Object(l.b)("inlineCode",{parentName:"h4"},"ubuntu-20.04-jdk-11-ndk-r21e")," (alias ",Object(l.b)("inlineCode",{parentName:"h4"},"latest"),")"),Object(l.b)("details",null,Object(l.b)("summary",null,"Details"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Docker image: ",Object(l.b)("inlineCode",{parentName:"li"},"ubuntu:focal-20210921")),Object(l.b)("li",{parentName:"ul"},"NDK 21.4.7075529"),Object(l.b)("li",{parentName:"ul"},"Node.js 16.13.2"),Object(l.b)("li",{parentName:"ul"},"Yarn 1.22.17"),Object(l.b)("li",{parentName:"ul"},"npm 8.1.2"),Object(l.b)("li",{parentName:"ul"},"Java 11"))),Object(l.b)("h4",{id:"image-ubuntu-2004-jdk-8-ndk-r21e"},"Image ",Object(l.b)("inlineCode",{parentName:"h4"},"ubuntu-20.04-jdk-8-ndk-r21e")),Object(l.b)("details",null,Object(l.b)("summary",null,"Details"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Docker image: ",Object(l.b)("inlineCode",{parentName:"li"},"ubuntu:focal-20210921")),Object(l.b)("li",{parentName:"ul"},"NDK 21.4.7075529"),Object(l.b)("li",{parentName:"ul"},"Node.js 16.13.2"),Object(l.b)("li",{parentName:"ul"},"Yarn 1.22.17"),Object(l.b)("li",{parentName:"ul"},"npm 8.1.2"),Object(l.b)("li",{parentName:"ul"},"Java 8"))),Object(l.b)("h4",{id:"image-ubuntu-1804-jdk-11-ndk-r19c"},"Image ",Object(l.b)("inlineCode",{parentName:"h4"},"ubuntu-18.04-jdk-11-ndk-r19c")),Object(l.b)("details",null,Object(l.b)("summary",null,"Details"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Docker image: ",Object(l.b)("inlineCode",{parentName:"li"},"ubuntu:bionic-20210930")),Object(l.b)("li",{parentName:"ul"},"NDK 19.2.5345600"),Object(l.b)("li",{parentName:"ul"},"Node.js 16.13.2"),Object(l.b)("li",{parentName:"ul"},"Yarn 1.22.17"),Object(l.b)("li",{parentName:"ul"},"Npm 8.1.2"),Object(l.b)("li",{parentName:"ul"},"Java 11"))),Object(l.b)("h4",{id:"image-ubuntu-1804-jdk-8-ndk-r19c-alias-default"},"Image ",Object(l.b)("inlineCode",{parentName:"h4"},"ubuntu-18.04-jdk-8-ndk-r19c")," (alias ",Object(l.b)("inlineCode",{parentName:"h4"},"default"),")"),Object(l.b)("details",null,Object(l.b)("summary",null,"Details"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Docker image: ",Object(l.b)("inlineCode",{parentName:"li"},"ubuntu:bionic-20210930")),Object(l.b)("li",{parentName:"ul"},"NDK 19.2.5345600"),Object(l.b)("li",{parentName:"ul"},"Node.js 16.13.2"),Object(l.b)("li",{parentName:"ul"},"Yarn 1.22.17"),Object(l.b)("li",{parentName:"ul"},"Npm 8.1.2"),Object(l.b)("li",{parentName:"ul"},"Java 8"))),Object(l.b)("h2",{id:"ios-build-server-configurations"},"iOS build server configurations"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},"iOS worker VMs run on Mac Mini 8.1 hosts in an isolated environment"),Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},"Every build gets its own fresh macOS VM"),Object(l.b)("li",{parentName:"ul"},"Hardware: Intel(R) Core(TM) i7-8700B CPU (6 cores/12 threads), 64 GB RAM"),Object(l.b)("li",{parentName:"ul"},"Build resource limits: 3 cores, 12 GB RAM"))),Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},"npm cache. ",Object(l.b)("a",{parentName:"p",href:"/build-reference/caching/#javascript-dependencies"},"Learn more"))),Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},Object(l.b)("inlineCode",{parentName:"p"},"~/.npmrc")),Object(l.b)("pre",{parentName:"li"},Object(l.b)("code",{parentName:"pre"},"registry=http://10.254.24.8:4873\n"))),Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},Object(l.b)("inlineCode",{parentName:"p"},"~/.yarnrc.yml")),Object(l.b)("pre",{parentName:"li"},Object(l.b)("code",{parentName:"pre"},'unsafeHttpWhitelist:\n  - "*"\nnpmRegistryServer: "registry=http://10.254.24.8:4873"\nenableImmutableInstalls: false\n')))),Object(l.b)("h4",{id:"image-macos-monterey-123-xcode-133-alias-latest"},"Image ",Object(l.b)("inlineCode",{parentName:"h4"},"macos-monterey-12.3-xcode-13.3")," (alias ",Object(l.b)("inlineCode",{parentName:"h4"},"latest"),")"),Object(l.b)("details",null,Object(l.b)("summary",null,"Details"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"macOS Monterey 12.3.1"),Object(l.b)("li",{parentName:"ul"},"Xcode 13.3.1 (13E500a)"),Object(l.b)("li",{parentName:"ul"},"Node.js 16.13.2"),Object(l.b)("li",{parentName:"ul"},"Yarn 1.22.17"),Object(l.b)("li",{parentName:"ul"},"npm 8.1.2"),Object(l.b)("li",{parentName:"ul"},"fastlane 2.205.2"),Object(l.b)("li",{parentName:"ul"},"CocoaPods 1.11.3"),Object(l.b)("li",{parentName:"ul"},"Ruby 2.7"))),Object(l.b)("h4",{id:"image-macos-monterey-121-xcode-132"},"Image ",Object(l.b)("inlineCode",{parentName:"h4"},"macos-monterey-12.1-xcode-13.2")),Object(l.b)("details",null,Object(l.b)("summary",null,"Details"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"macOS Monterey 12.1"),Object(l.b)("li",{parentName:"ul"},"Xcode 13.2.1 (13C100)"),Object(l.b)("li",{parentName:"ul"},"Node.js 16.13.2"),Object(l.b)("li",{parentName:"ul"},"Yarn 1.22.17"),Object(l.b)("li",{parentName:"ul"},"npm 8.1.2"),Object(l.b)("li",{parentName:"ul"},"fastlane 2.201.0"),Object(l.b)("li",{parentName:"ul"},"CocoaPods 1.11.2"),Object(l.b)("li",{parentName:"ul"},"Ruby 2.7"))),Object(l.b)("h4",{id:"image-macos-big-sur-114-xcode-130-alias-default"},"Image ",Object(l.b)("inlineCode",{parentName:"h4"},"macos-big-sur-11.4-xcode-13.0")," (alias ",Object(l.b)("inlineCode",{parentName:"h4"},"default"),")"),Object(l.b)("details",null,Object(l.b)("summary",null,"Details"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"macOS Big Sur 11.4"),Object(l.b)("li",{parentName:"ul"},"Xcode 13.0 (13A233)"),Object(l.b)("li",{parentName:"ul"},"Node.js 16.13.2"),Object(l.b)("li",{parentName:"ul"},"Yarn 1.22.17"),Object(l.b)("li",{parentName:"ul"},"npm 8.1.2"),Object(l.b)("li",{parentName:"ul"},"fastlane 2.185.1"),Object(l.b)("li",{parentName:"ul"},"CocoaPods 1.10.1"),Object(l.b)("li",{parentName:"ul"},"Ruby 2.7"))),Object(l.b)("h4",{id:"image-macos-big-sur-114-xcode-125"},"Image ",Object(l.b)("inlineCode",{parentName:"h4"},"macos-big-sur-11.4-xcode-12.5")),Object(l.b)("details",null,Object(l.b)("summary",null,"Details"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"macOS Big Sur 11.4"),Object(l.b)("li",{parentName:"ul"},"Xcode 12.5 (12E5244e)"),Object(l.b)("li",{parentName:"ul"},"Node.js 16.13.2"),Object(l.b)("li",{parentName:"ul"},"Yarn 1.22.17"),Object(l.b)("li",{parentName:"ul"},"npm 8.1.2"),Object(l.b)("li",{parentName:"ul"},"fastlane 2.185.1"),Object(l.b)("li",{parentName:"ul"},"CocoaPods 1.10.1"),Object(l.b)("li",{parentName:"ul"},"Ruby 2.7"))))}u.isMDXComponent=!0},dhJC:function(e,t,n){"use strict";function a(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}n.d(t,"a",(function(){return a}))},xKhX:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/build-reference/infrastructure",function(){return n("RjfX")}])}},[["xKhX",1,0]]]);