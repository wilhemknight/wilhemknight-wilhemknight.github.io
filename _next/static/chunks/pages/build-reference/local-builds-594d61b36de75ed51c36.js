_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[68],{"/h7W":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/build-reference/local-builds",function(){return n("QPA8")}])},"7ljp":function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return f}));var r=n("q1tI"),i=n.n(r);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var u=i.a.createContext({}),b=function(e){var t=i.a.useContext(u),n=t;return e&&(n="function"===typeof e?e(t):l(l({},t),e)),n},s=function(e){var t=b(e.components);return i.a.createElement(u.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},d=i.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,o=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),s=b(n),d=r,f=s["".concat(o,".").concat(d)]||s[d]||p[d]||a;return n?i.a.createElement(f,l(l({ref:t},u),{},{components:n})):i.a.createElement(f,l({ref:t},u))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"===typeof e||r){var a=n.length,o=new Array(a);o[0]=d;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"===typeof e?e:r,o[1]=l;for(var u=2;u<a;u++)o[u]=n[u];return i.a.createElement.apply(null,o)}return i.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},HALo:function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n.d(t,"a",(function(){return r}))},QPA8:function(e,t,n){"use strict";n.r(t),n.d(t,"meta",(function(){return l})),n.d(t,"headings",(function(){return c})),n.d(t,"default",(function(){return b}));var r=n("HALo"),i=n("dhJC"),a=(n("q1tI"),n("7ljp")),o=["components"],l={title:"Running builds on your own infrastructure"},c=[{depth:2,type:"text",title:"Prerequisites"},{depth:2,type:"text",title:"Use cases for local builds"},{depth:2,type:"text",title:"Using local builds for debugging"},{depth:2,type:"text",title:"Limitations"}],u={meta:l,headings:c};function b(e){var t=e.components,n=Object(i.a)(e,o);return Object(a.b)("wrapper",Object(r.a)({},u,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,"You can run the same build process that we run on the EAS Build servers directly on your machine with the ",Object(a.b)("inlineCode",{parentName:"p"},"--local")," flag."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"eas build --platform android --local")," or ",Object(a.b)("inlineCode",{parentName:"p"},"eas build --platform ios --local")),Object(a.b)("h2",{id:"prerequisites"},"Prerequisites"),Object(a.b)("p",null,"You need to be authenticated with Expo:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"Run ",Object(a.b)("inlineCode",{parentName:"li"},"eas login"),","),Object(a.b)("li",{parentName:"ul"},"or set ",Object(a.b)("inlineCode",{parentName:"li"},"EXPO_TOKEN")," (",Object(a.b)("a",{parentName:"li",href:"/../../../../../../accounts/programmatic-access/"},"learn more about token-based authentication"),").")),Object(a.b)("h2",{id:"use-cases-for-local-builds"},"Use cases for local builds"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"Company policies that restrict the use of third-party CI/CD services. With local builds, the entire process runs on your infrastructure and the only communication with EAS servers is:",Object(a.b)("ul",{parentName:"li"},Object(a.b)("li",{parentName:"ul"},"to make sure project ",Object(a.b)("inlineCode",{parentName:"li"},"@account/slug")," exists"),Object(a.b)("li",{parentName:"ul"},"if you are using managed credentials to download them."))),Object(a.b)("li",{parentName:"ul"},"Debugging (more info in ",Object(a.b)("a",{parentName:"li",href:"/build-reference/local-builds/#using-local-builds-for-debugging"},"the next section"),")")),Object(a.b)("h2",{id:"using-local-builds-for-debugging"},"Using local builds for debugging"),Object(a.b)("p",null,"If you encounter build failures on EAS servers and you're unable to determine the cause from inspecting the logs, you may find it helpful to debug the issue locally. To simplify that process we support a number of environment variables to configure the local build process."),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"EAS_LOCAL_BUILD_SKIP_CLEANUP=1")," - Set this to disable cleaning up the working directory after the build process is finished."),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"EAS_LOCAL_BUILD_WORKINGDIR")," - Specify the working directory for the build process, by default it's somewhere (it's platform dependent) in ",Object(a.b)("inlineCode",{parentName:"li"},"/tmp")," folder."),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"EAS_LOCAL_BUILD_ARTIFACTS_DIR")," - The directory where artifacts are copied after a successful build. By default these files are copied to the current directory, which may be undesirable if you are running many consecutive builds.")),Object(a.b)("h2",{id:"limitations"},"Limitations"),Object(a.b)("p",null,"Some of the options available for cloud builds are not available locally. Limitations you should be aware of:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"You can only build for a specific platform (option ",Object(a.b)("inlineCode",{parentName:"li"},"all")," is disabled)."),Object(a.b)("li",{parentName:"ul"},"Customizing versions of software is not supported, fields ",Object(a.b)("inlineCode",{parentName:"li"},"node"),", ",Object(a.b)("inlineCode",{parentName:"li"},"yarn"),", ",Object(a.b)("inlineCode",{parentName:"li"},"fastlane"),", ",Object(a.b)("inlineCode",{parentName:"li"},"cocoapods"),", ",Object(a.b)("inlineCode",{parentName:"li"},"ndk"),", ",Object(a.b)("inlineCode",{parentName:"li"},"image")," in ",Object(a.b)("strong",{parentName:"li"},"eas.json")," are ignored."),Object(a.b)("li",{parentName:"ul"},"Caching is not supported."),Object(a.b)("li",{parentName:"ul"},"EAS Secrets are not supported (set them in your environment locally instead)."),Object(a.b)("li",{parentName:"ul"},"You are responsible for making sure that the environment have all necessary tools installed:",Object(a.b)("ul",{parentName:"li"},Object(a.b)("li",{parentName:"ul"},"Node.js/yarn/npm"),Object(a.b)("li",{parentName:"ul"},"fastlane (iOS only)"),Object(a.b)("li",{parentName:"ul"},"CocoaPods (iOS only)"),Object(a.b)("li",{parentName:"ul"},"Android SDK and NDK")))))}b.isMDXComponent=!0},Qetd:function(e,t,n){"use strict";var r=Object.assign.bind(Object);e.exports=r,e.exports.default=e.exports},dhJC:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}n.d(t,"a",(function(){return r}))}},[["/h7W",1,0]]]);