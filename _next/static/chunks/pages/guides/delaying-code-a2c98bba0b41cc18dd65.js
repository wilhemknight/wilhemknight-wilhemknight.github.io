_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[143],{"+Css":function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",(function(){return r}))},"5BX9":function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return c}));var r=n("q1tI"),o=n("AeFk"),a=Object(r.createContext)({version:"latest",hasVersion:!1,setVersion:function(e){throw new Error("PageApiVersionContext not found")}});function i(e){var t=s(e.router.pathname),n=null!==t,i=Object(r.useCallback)((function(t){e.router.push(function(e,t){var n=s(e);return n?e.replace(n,t):e}(e.router.pathname,t))}),[]);return Object(o.c)(a.Provider,{value:{setVersion:i,hasVersion:n,version:t||"latest"}},e.children)}function c(){return Object(r.useContext)(a)}function s(e){return function(e){return e.startsWith("/versions/")}(e)?e.split("/",3).pop():null}},"7LId":function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}n.d(t,"a",(function(){return o}))},"7ljp":function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return f}));var r=n("q1tI"),o=n.n(r);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var u=o.a.createContext({}),l=function(e){var t=o.a.useContext(u),n=t;return e&&(n="function"===typeof e?e(t):c(c({},t),e)),n},p=function(e){var t=l(e.components);return o.a.createElement(u.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},b=o.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,i=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=l(n),b=r,f=p["".concat(i,".").concat(b)]||p[b]||d[b]||a;return n?o.a.createElement(f,c(c({ref:t},u),{},{components:n})):o.a.createElement(f,c({ref:t},u))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"===typeof e||r){var a=n.length,i=new Array(a);i[0]=b;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"===typeof e?e:r,i[1]=c;for(var u=2;u<a;u++)i[u]=n[u];return o.a.createElement.apply(null,i)}return o.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"},"C+bE":function(e,t){function n(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?(e.exports=n=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=n=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},FIV9:function(e,t,n){"use strict";n.r(t),n.d(t,"meta",(function(){return u})),n.d(t,"headings",(function(){return l})),n.d(t,"default",(function(){return d}));var r=n("HALo"),o=n("dhJC"),a=(n("q1tI"),n("7ljp")),i=n("zokH"),c=n("I0q5"),s=["components"],u={title:"Delaying Your Code To Run Later",sidebar_title:"Delaying Your Code"},l=[{depth:2,type:"text",title:"Delaying code while your app is in the foreground"},{depth:3,type:"text",title:"InteractionManager"},{depth:3,type:"text",title:"Usage in React Native"},{depth:2,type:"text",title:"Delaying code while your app is in the background"}],p={meta:u,headings:l};function d(e){var t=e.components,n=Object(o.a)(e,s);return Object(a.b)("wrapper",Object(r.a)({},p,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,"When building an application, much of your code will run in response to events like component lifecycle events and user interactions. Sometimes you'll need to delay when your code runs instead of running it immediately after an event. Responsive applications need to respond quickly to user interactions and render smooth animations, but the code for your user interface (such as React components that update the UI) shares a JS thread with other event-handling code. Therefore, you should be careful to schedule work in small increments and at times that won't impact your users' experience to deliver a great experience to your users."),Object(a.b)("h2",{id:"delaying-code-while-your-app-is-in-the-foreground"},"Delaying code while your app is in the foreground"),Object(a.b)("p",null," While your application is in the foreground, you have access to scheduling functions that are often available in other JS environments like ",Object(a.b)("inlineCode",{parentName:"p"},"setTimeout"),", ",Object(a.b)("inlineCode",{parentName:"p"},"setInterval"),", and ",Object(a.b)("inlineCode",{parentName:"p"},"requestAnimationFrame"),". If you are not familiar with these methods or when you might use them we recommend Mozilla's guide on ",Object(a.b)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Asynchronous/Timeouts_and_intervals"},"asynchronous JavaScript"),"."),Object(a.b)("h3",{id:"interactionmanager"},"InteractionManager"),Object(a.b)("p",null,"React Native provides an additional timing technique with ",Object(a.b)("a",{parentName:"p",href:"https://reactnative.dev/docs/interactionmanager"},"InteractionManager"),". InteractionManager allows you to schedule computationally expensive code to run after any interactions and animations they might impact have completed. You can schedule computations to run with ",Object(a.b)("inlineCode",{parentName:"p"},"InteractionManager.runAfterInteractions(() => { /* your task */ })"),"."),Object(a.b)("p",null,"React Native itself, and high-quality libraries you might use, already register animations with ",Object(a.b)("inlineCode",{parentName:"p"},"InteractionManager"),". If you need to, you can:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"register any other animations via ",Object(a.b)("inlineCode",{parentName:"li"},"InteractionManager.createInteractionHandle()")," on the start of your animation "),Object(a.b)("li",{parentName:"ul"},"signal completion via ",Object(a.b)("inlineCode",{parentName:"li"},"InteractionManager.clearInteractionHandle(resultOfCallToCreateInteractionHandle)"))),Object(a.b)("h3",{id:"usage-in-react-native"},"Usage in React Native"),Object(a.b)("p",null,"You may need to update a component's state at the end of your computation. A few points to note:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"Make sure that your timers do not live beyond the lifecycle of your component by clearing your timers in an effect hook's cleanup function or the ",Object(a.b)("inlineCode",{parentName:"li"},"componentWillUnmount")," lifecycle method."),Object(a.b)("li",{parentName:"ul"},"With class components, you must bind the context, either explicitly or by using arrow functions, to have access to methods like ",Object(a.b)("inlineCode",{parentName:"li"},"setState")," when your computation is run."),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"setState")," is asynchronous, so if you need to ",Object(a.b)("a",{parentName:"li",href:"https://reactjs.org/docs/react-component.html#setstate"},"mutate the existing state"),", pass a function rather than an object to the method.")),Object(a.b)(i.b,{mdxType:"Tabs"},Object(a.b)(i.a,{label:"With Hooks",mdxType:"Tab"},Object(a.b)(c.a,{mdxType:"SnackInline"},Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-jsx"},"import React, { useState, useEffect } from 'react';\nimport { Text } from 'react-native';\n\nconst App = () => {\n  // Set the initial count to 0\n  const [count, setCount] = useState(0);\n  useEffect(() => {\n    // increment the count by 1\n    const countTimer = setInterval(() => {\n      setCount((prevCount) => prevCount + 1);\n    // every 1000 milliseconds\n    }, 1000);\n    // and clear this timer when the component is unmounted\n    return function cleanup() {\n      clearInterval(countTimer);\n    };\n  });\n\n  return (<Text>Count is {count}</Text>);\n};\n\nexport default App;\n")))),Object(a.b)(i.a,{label:"With Class Components",mdxType:"Tab"},Object(a.b)(c.a,{mdxType:"SnackInline"},Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-jsx"},"import React from 'react';\nimport { Text } from 'react-native';\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      count: 0,\n    };\n  }\n\n  componentDidMount() {\n    this.timer = setInterval(() => {\n      this.setState((state) => ({ count: state.count + 1 }));\n    }, 1000);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timer);\n  }\n\n  render() {\n    return <Text>Count is {this.state.count}</Text>;\n  }\n}\n"))))),Object(a.b)("h2",{id:"delaying-code-while-your-app-is-in-the-background"},"Delaying code while your app is in the background"),Object(a.b)("p",null,"For some use cases, you want your computation to continue even while your user switches to another app. Setting this up manually can be complex, so Expo provides some modules that simplify things for the most common use cases."),Object(a.b)("table",null,Object(a.b)("thead",{parentName:"table"},Object(a.b)("tr",{parentName:"thead"},Object(a.b)("th",{parentName:"tr",align:null},"If you want to..."),Object(a.b)("th",{parentName:"tr",align:null},"You can use..."))),Object(a.b)("tbody",{parentName:"table"},Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",{parentName:"tr",align:null},"fetch data from some endpoint"),Object(a.b)("td",{parentName:"tr",align:null},Object(a.b)("a",{parentName:"td",href:"/versions/latest/sdk/background-fetch/"},"expo-background-fetch"))),Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",{parentName:"tr",align:null},"respond to changes in the user's location"),Object(a.b)("td",{parentName:"tr",align:null},Object(a.b)("a",{parentName:"td",href:"/versions/latest/sdk/location/"},"expo-location"))),Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",{parentName:"tr",align:null},"perform a generic long-running computation"),Object(a.b)("td",{parentName:"tr",align:null},Object(a.b)("a",{parentName:"td",href:"/versions/latest/sdk/task-manager/"},"expo-task-manager"))))))}d.isMDXComponent=!0},"H+61":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))},I0q5:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n("z7pX"),o=n("H+61"),a=n("UlJF"),i=n("+Css"),c=n("7LId"),s=n("VIvw"),u=n("iHvq"),l=n("cpVT"),p=n("q1tI"),d=n("ufKf"),b=n("3zh3"),f=n("AeFk"),m=function(e){var t=e.size,n=void 0===t?24:t,r=e.stroke,o=void 0===r?b.palette.dark.white:r;return Object(f.c)("svg",{"aria-label":"check",width:n,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object(f.c)("path",{d:"M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6m4-3h6v6m-11 5L21 3",stroke:o,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))},h=n("5BX9");function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var j="v".concat(n("kiQV").version),v=function(e){Object(c.a)(n,e);var t=y(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return e=t.call.apply(t,[this].concat(c)),Object(l.a)(Object(i.a)(e),"contentRef",p.createRef()),Object(l.a)(Object(i.a)(e),"state",{ready:!1}),Object(l.a)(Object(i.a)(e),"getSelectedDocsVersion",(function(){var t=e.context.version;return"latest"===t?j:t})),Object(l.a)(Object(i.a)(e),"getSnackSdkVersion",(function(){var t=e.getSelectedDocsVersion();return"unversioned"===t&&(t=j),t.replace("v","")})),Object(l.a)(Object(i.a)(e),"getExamplesPath",(function(){return"".concat(document.location.origin,"/static/examples/").concat(e.getSelectedDocsVersion())})),Object(l.a)(Object(i.a)(e),"getDependencies",(function(){return Object(r.a)(e.props.dependencies).join(",")})),Object(l.a)(Object(i.a)(e),"getCode",(function(){return(e.contentRef.current&&e.contentRef.current.textContent||"").replace(/%%placeholder-start%%.*%%placeholder-end%%/g,"")})),e}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this.setState({ready:!0})}},{key:"render",value:function(){return Object(f.c)("div",null,Object(f.c)("div",{ref:this.contentRef,style:this.props.contentHidden?{display:"none"}:void 0},this.props.children),Object(f.c)("form",{action:d.a,method:"POST",target:"_blank"},Object(f.c)("input",{type:"hidden",name:"platform",value:this.props.defaultPlatform||"android"}),Object(f.c)("input",{type:"hidden",name:"name",value:this.props.label||"Example"}),Object(f.c)("input",{type:"hidden",name:"dependencies",value:this.getDependencies()}),Object(f.c)("input",{type:"hidden",name:"sdkVersion",value:this.getSnackSdkVersion()}),this.props.platforms&&Object(f.c)("input",{type:"hidden",name:"supportedPlatforms",value:this.props.platforms.join(",")}),this.state.ready&&Object(f.c)("input",{type:"hidden",name:"files",value:JSON.stringify(Object(d.b)({templateId:this.props.templateId,code:this.getCode(),files:this.props.files,baseURL:this.getExamplesPath()}))}),Object(f.c)("button",{className:"snack-inline-example-button",disabled:!this.state.ready},Object(f.c)(m,{size:16})," ",this.props.buttonTitle||"Try this example on Snack")))}}]),n}(p.Component);Object(l.a)(v,"contextType",h.a),Object(l.a)(v,"defaultProps",{dependencies:[]})},UlJF:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return o}))},VIvw:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("C+bE"),o=n.n(r),a=n("+Css");function i(e,t){if(t&&("object"===o()(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Object(a.a)(e)}},cpVT:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},iBs3:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/guides/delaying-code",function(){return n("FIV9")}])},iHvq:function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",(function(){return r}))},kiQV:function(e){e.exports=JSON.parse('{"name":"expo-docs","version":"44.0.0","private":true,"scripts":{"dev":"rimraf .next/preval && next dev -p 3002","build":"cross-env NODE_OPTIONS=--max-old-space-size=8192 next build","export":"yarn run build && next export && yarn run export-issue-404","export-issue-404":"echo \\"\ud83d\udee0  Patching https://github.com/vercel/next.js/issues/16528\\"; cp out/404/index.html out/404.html","export-server":"http-server out -p 8000","import-react-native-docs":"node ./scripts/import-react-native-docs.js","test-links":"node --async-stack-traces --unhandled-rejections=strict ./scripts/test-links.js","prettier":"prettier --write \'**/*.{js,ts,tsx,md}\'","lint":"tsc --noEmit && eslint .","lint-links":"remark -u validate-links ./pages","watch":"tsc --noEmit -w","test":"jest","schema-sync":"node --async-stack-traces --unhandled-rejections=strict ./scripts/schema-sync.js","remove-version":"node --unhandled-rejections=strict ./scripts/remove-version.js"},"resolutions":{"webpack":"^5.28.0"},"dependencies":{"@emotion/react":"^11.4.0","@expo/spawn-async":"^1.5.0","@expo/styleguide":"^4.0.1","@mdx-js/loader":"^1.6.22","@mdx-js/mdx":"^1.6.22","@mdx-js/react":"^1.6.22","@mdx-js/runtime":"^1.6.22","@reach/tabs":"^0.15.0","@sentry/browser":"^5.6.1","date-fns":"^2.28.0","docsearch.js":"^2.5.2","emoji-regex":"^9.2.2","front-matter":"^2.3.0","fs-extra":"^6.0.1","github-slugger":"^1.3.0","hotshot":"^1.0.5","lodash":"^4.17.20","next":"^11.1.4","nprogress":"0.2.0","path-browserify":"^1.0.1","prism-react-renderer":"1.0.2","prop-types":"15.7.2","react":"^17.0.2","react-diff-view":"^2.4.7","react-dom":"^17.0.2","react-feather":"^2.0.9","react-markdown":"^6.0.3","react-player":"^1.11.1","react-visibility-sensor":"^5.1.1","remark-gfm":"^1.0.0","tippy.js":"^6.3.1"},"devDependencies":{"@apidevtools/json-schema-ref-parser":"^9.0.9","@babel/core":"^7.13.14","@emotion/babel-preset-css-prop":"^11.2.0","@emotion/jest":"^11.7.1","@testing-library/jest-dom":"5.11.0","@testing-library/react":"10.4.3","@testing-library/react-hooks":"^7.0.2","@types/cacache":"^15.0.1","@types/fs-extra":"^9.0.11","@types/github-slugger":"^1.3.0","@types/google.analytics":"^0.0.41","@types/gtag.js":"^0.0.6","@types/lodash":"^4.14.161","@types/long":"^4.0.1","@types/mdx-js__react":"^1.5.3","@types/node":"^14.11.2","@types/nprogress":"^0.2.0","@types/react":"^17.0.11","axios":"^0.21.2","babel-plugin-module-resolver":"3.1.1","babel-plugin-preval":"^3.0.1","cross-env":"^5.2.0","danger":"^9.2.10","esbuild-loader":"^2.13.1","eslint":"^8.6.0","eslint-config-next":"^10.2.3","eslint-config-universe":"^10.0.0","eslint-plugin-lodash":"^7.3.0","http-server":"^0.12.3","jest":"^27.4.7","js-yaml":"^4.1.0","prettier":"^2.3.1","puppeteer":"^10.2.0","react-test-renderer":"^17.0.2","rehype-slug":"^4.0.1","remark-cli":"^9.0.0","remark-frontmatter":"^2.0.0","remark-validate-links":"^10.0.4","rimraf":"^3.0.2","semver":"^7.3.5","sitemap":"^6.3.0","typescript":"^4.5.4","unist-builder":"^2.0.0","unist-util-visit":"^2.0.3"}}')},ufKf:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var r="https://snack.expo.dev";function o(e){var t=e.templateId,n=e.code,r=e.files,o=e.baseURL,a={};return r&&Object.keys(r).forEach((function(e){var t=r[e],n=/\.(jsx?|tsx?|json|md)$/i.test(e);a[e]=n?{type:"CODE",url:t.match(/^https?:\/\//)?t:"".concat(o,"/").concat(t)}:{type:"ASSET",contents:t}})),t?a["App.js"]={type:"CODE",url:"".concat(o,"/").concat(t,".js")}:n&&(a["App.js"]={type:"CODE",contents:n}),a}},z7pX:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("6FTQ");var o=n("8rE2");function a(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Object(o.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}},[["iBs3",1,0,2,3,23]]]);