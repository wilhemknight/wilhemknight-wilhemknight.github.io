_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[172],{"7ljp":function(e,t,a){"use strict";a.d(t,"a",(function(){return h})),a.d(t,"b",(function(){return d}));var r=a("q1tI"),n=a.n(r);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var l=n.a.createContext({}),c=function(e){var t=n.a.useContext(l),a=t;return e&&(a="function"===typeof e?e(t):p(p({},t),e)),a},h=function(e){var t=c(e.components);return n.a.createElement(l.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return n.a.createElement(n.a.Fragment,{},t)}},u=n.a.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),h=c(a),u=r,d=h["".concat(o,".").concat(u)]||h[u]||b[u]||i;return a?n.a.createElement(d,p(p({ref:t},l),{},{components:a})):n.a.createElement(d,p({ref:t},l))}));function d(e,t){var a=arguments,r=t&&t.mdxType;if("string"===typeof e||r){var i=a.length,o=new Array(i);o[0]=u;var p={};for(var s in t)hasOwnProperty.call(t,s)&&(p[s]=t[s]);p.originalType=e,p.mdxType="string"===typeof e?e:r,o[1]=p;for(var l=2;l<i;l++)o[l]=a[l];return n.a.createElement.apply(null,o)}return n.a.createElement.apply(null,a)}u.displayName="MDXCreateElement"},HALo:function(e,t,a){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}a.d(t,"a",(function(){return r}))},JPGH:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/guides/using-graphql",function(){return a("pI59")}])},Qetd:function(e,t,a){"use strict";var r=Object.assign.bind(Object);e.exports=r,e.exports.default=e.exports},dhJC:function(e,t,a){"use strict";function r(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}a.d(t,"a",(function(){return r}))},pI59:function(e,t,a){"use strict";a.r(t),a.d(t,"meta",(function(){return p})),a.d(t,"headings",(function(){return s})),a.d(t,"default",(function(){return c}));var r=a("HALo"),n=a("dhJC"),i=(a("q1tI"),a("7ljp")),o=["components"],p={title:"Using GraphQL"},s=[{depth:2,type:"text",title:"Overview"},{depth:2,type:"text",title:"Communicating with a GraphQL API"},{depth:3,type:"text",title:"Fetching data with GraphQL queries"},{depth:3,type:"text",title:"Creating, updating and deleting data with GraphQL mutations"},{depth:2,type:"text",title:"The GraphQL schema"},{depth:3,type:"text",title:"The Schema Definition Language (SDL)"},{depth:3,type:"text",title:"Root types are the entry points for the API"},{depth:2,type:"text",title:"Getting started with GraphQL"},{depth:2,type:"text",title:"Next Steps & Resources"}],l={meta:p,headings:s};function c(e){var t=e.components,a=Object(n.a)(e,o);return Object(i.b)("wrapper",Object(r.a)({},l,a,{components:t,mdxType:"MDXLayout"}),Object(i.b)("h2",{id:"overview"},"Overview"),Object(i.b)("p",null,Object(i.b)("a",{parentName:"p",href:"http://graphql.org/"},"GraphQL")," is a ",Object(i.b)("em",{parentName:"p"},"query language")," for APIs. It enables declarative data fetching and thus ties in perfectly with React/React Native as a declarative framework for building user interfaces. GraphQL can either complement or entirely replace the usage of REST APIs."),Object(i.b)("p",null,"The main difference between REST and GraphQL is that RESTful APIs have ",Object(i.b)("em",{parentName:"p"},"multiple endpoints")," that return ",Object(i.b)("em",{parentName:"p"},"fixed data structures")," whereas a GraphQL server only exposes a ",Object(i.b)("em",{parentName:"p"},"single endpoint")," and returns ",Object(i.b)("em",{parentName:"p"},"flexible data structures"),". This works because a client that needs data from the server also submits its precise data requirements in each request which allows the server to tailor the response exactly according to the client\u2019s needs."),Object(i.b)("p",null,"You can learn more about the differences between GraphQL and REST ",Object(i.b)("a",{parentName:"p",href:"https://www.howtographql.com/basics/1-graphql-is-the-better-rest/"},"here"),". To get a high-level overview and understand more about the architectural use cases of GraphQL, take a look at ",Object(i.b)("a",{parentName:"p",href:"https://www.howtographql.com/basics/3-big-picture/"},"this")," article."),Object(i.b)("p",null,"GraphQL has a rapidly growing community. To stay up-to-date about everything that\u2019s happening in the GraphQL ecosystem, check out these resources:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",{parentName:"li",href:"https://www.graphqlweekly.com/"},"GraphQL Weekly"),": Weekly newsletter about GraphQL"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",{parentName:"li",href:"https://www.graphql-europe.org/"},"GraphQL Conf"),": One of the world's biggest GraphQL conferences")),Object(i.b)("p",null,"For an in-depth learning experience, visit the ",Object(i.b)("a",{parentName:"p",href:"https://www.howtographql.com/"},"How to GraphQL")," fullstack tutorial website."),Object(i.b)("h2",{id:"communicating-with-a-graphql-api"},"Communicating with a GraphQL API"),Object(i.b)("p",null,"In this section, we\u2019ll explain the core concepts you need to know when working with a GraphQL API."),Object(i.b)("h3",{id:"fetching-data-with-graphql-queries"},"Fetching data with GraphQL queries"),Object(i.b)("p",null,"When an application needs to retrieve data from a GraphQL API, it has to send a ",Object(i.b)("em",{parentName:"p"},"query")," to the server in which it specifies the data requirements. Most GraphQL servers accept only HTTP POST requests where the query is put into the ",Object(i.b)("em",{parentName:"p"},"body")," of the request. Note however that GraphQL itself is actually ",Object(i.b)("em",{parentName:"p"},"transport layer agnostic"),", meaning that the client-server communication could also happen using other networking protocols than HTTP."),Object(i.b)("p",null,"Here\u2019s an example query that a client might send in an Instagram-like application:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-graphql"},"query {\n  feed {\n    id\n    imageUrl\n    description\n  }\n}\n")),Object(i.b)("p",null,"The keyword ",Object(i.b)("inlineCode",{parentName:"p"},"query")," in the beginning expresses the ",Object(i.b)("em",{parentName:"p"},"operation type"),". Besides ",Object(i.b)("inlineCode",{parentName:"p"},"query"),", there are two more operation types called ",Object(i.b)("inlineCode",{parentName:"p"},"mutation")," and ",Object(i.b)("inlineCode",{parentName:"p"},"subscription"),". Note that the default operation type of a request is in fact ",Object(i.b)("inlineCode",{parentName:"p"},"query"),", so you might as well remove it from the above request. ",Object(i.b)("inlineCode",{parentName:"p"},"feed")," is the ",Object(i.b)("em",{parentName:"p"},"root field")," of the query and everything that follows is called the ",Object(i.b)("em",{parentName:"p"},"selection set")," of the query."),Object(i.b)("p",null,"When a server receives the above query, it will ",Object(i.b)("a",{parentName:"p",href:"https://blog.graph.cool/graphql-server-basics-the-schema-ac5e2950214e#1880"},"resolve")," it, i.e. collect the required data, and package up the response in the same format of the query. Here\u2019s what a potential response could look like:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-json"},'{\n  "data": {\n    "feed": [\n      {\n        "id": "1",\n        "description": "Nice Sunset",\n        "imageUrl": "http://example.org/sunset.png"\n      },\n      {\n        "id": "2",\n        "description": "Cute Cats",\n        "imageUrl": "http://example.org/cats.png"\n      }\n    ]\n  }\n}\n')),Object(i.b)("p",null,"The root of the returned JSON object is a field called ",Object(i.b)("inlineCode",{parentName:"p"},"data")," as defined in the official ",Object(i.b)("a",{parentName:"p",href:"http://spec.graphql.org/draft/#sec-Data"},"GraphQL specification"),". The rest of the JSON object then contains exactly the information that the client asked for in the query. If the client for example hadn\u2019t included the ",Object(i.b)("inlineCode",{parentName:"p"},"imageUrl")," in the query\u2019s selection set, the server wouldn\u2019t have included it in its response either."),Object(i.b)("p",null,"In case the GraphQL request fails for some reason, e.g. because the query was malformed, the server will not return the ",Object(i.b)("inlineCode",{parentName:"p"},"data")," field but instead return an array called ",Object(i.b)("inlineCode",{parentName:"p"},"errors")," with information about the failure. Notice that it can happen that the server returns both, ",Object(i.b)("inlineCode",{parentName:"p"},"data")," ",Object(i.b)("em",{parentName:"p"},"and")," ",Object(i.b)("inlineCode",{parentName:"p"},"errors")," . This can occur when the server can only partially resolve a query, e.g. because the user requesting the data only had the access rights for specific parts of the query's payload."),Object(i.b)("h3",{id:"creating-updating-and-deleting-data-with-graphql-mutations"},"Creating, updating and deleting data with GraphQL mutations"),Object(i.b)("p",null,"Most of the time when working with an API, you\u2019ll also want to make changes to the data that\u2019s currently stored in the backend. In GraphQL, this is done using so-called ",Object(i.b)("em",{parentName:"p"},"mutations"),". A mutation follows the exact same syntactical structure as a query. In fact, it actually also ",Object(i.b)("em",{parentName:"p"},"is")," a query in that it combines a write operation with a directly following read operation. Essentially, the idea of a mutation corresponds to the PUT, POST and DELETE calls that you would run against a REST API but additionally allows you to fetch data in a single request."),Object(i.b)("p",null,"Let\u2019s consider an example mutation to create a new post in our sample Instagram app:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-graphql"},'mutation {\n  createPost(description: "Funny Birds", imageUrl: "http://example.org/birds.png") {\n    id\n  }\n}\n')),Object(i.b)("p",null,"Instead of the ",Object(i.b)("inlineCode",{parentName:"p"},"query")," operation type, this time we\u2019re using ",Object(i.b)("inlineCode",{parentName:"p"},"mutation"),". Then follows the ",Object(i.b)("em",{parentName:"p"},"root field"),", which in this case is called ",Object(i.b)("inlineCode",{parentName:"p"},"createPost"),". Notice that all fields can also take arguments, here we provide the post\u2019s ",Object(i.b)("inlineCode",{parentName:"p"},"description")," and ",Object(i.b)("inlineCode",{parentName:"p"},"imageUrl")," so the server knows what it should write into the database. In the payload of the mutation we simply specify the ",Object(i.b)("inlineCode",{parentName:"p"},"id")," of the new post that will be generated on the server-side."),Object(i.b)("p",null,"After the server created the new post in the database, it will return the following sample response to the client:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-json"},'{\n  "data": {\n    "createPost": {\n      "id": "1"\n    }\n  }\n}\n')),Object(i.b)("h2",{id:"the-graphql-schema"},"The GraphQL schema"),Object(i.b)("p",null,"In this section, we'll discuss the backbone of every GraphQL server: The GraphQL schema."),Object(i.b)("blockquote",null,Object(i.b)("p",{parentName:"blockquote"},"For a technical deep dive all around the GraphQL schema, be sure to check out ",Object(i.b)("a",{parentName:"p",href:"https://blog.graph.cool/graphql-server-basics-the-schema-ac5e2950214e"},"this")," article.")),Object(i.b)("h3",{id:"the-schema-definition-language-sdl"},"The Schema Definition Language (SDL)"),Object(i.b)("p",null,"GraphQL has a ",Object(i.b)("a",{parentName:"p",href:"http://graphql.org/learn/schema/#type-system"},"type system")," that\u2019s used to define the capabilities of an API. These capabilities are written down in the GraphQL ",Object(i.b)("em",{parentName:"p"},"schema")," using the syntax of the GraphQL ",Object(i.b)("a",{parentName:"p",href:"https://blog.graph.cool/graphql-sdl-schema-definition-language-6755bcb9ce51"},"Schema Definition Language")," (SDL). Here\u2019s what the ",Object(i.b)("inlineCode",{parentName:"p"},"Post")," type from our previous examples looks like:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-graphql"},"type Post {\n  id: ID!\n  description: String!\n  imageUrl: String!\n}\n")),Object(i.b)("p",null,"The syntax is pretty straightforward. We\u2019re defining a type called ",Object(i.b)("inlineCode",{parentName:"p"},"Post")," that has three properties, in GraphQL terminology these properties are called ",Object(i.b)("em",{parentName:"p"},"fields"),". Each field has a ",Object(i.b)("em",{parentName:"p"},"name")," and a ",Object(i.b)("em",{parentName:"p"},"type"),". The exclamation point following a type means that this field cannot be ",Object(i.b)("inlineCode",{parentName:"p"},"null"),"."),Object(i.b)("h3",{id:"root-types-are-the-entry-points-for-the-api"},"Root types are the entry points for the API"),Object(i.b)("p",null,"Each schema has so-called ",Object(i.b)("a",{parentName:"p",href:"http://graphql.org/learn/schema/#the-query-and-mutation-types"},"root types")," that define the ",Object(i.b)("em",{parentName:"p"},"entry points")," into the API. These are the root types that you can define in your schema:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"Query"),": Specifies all the queries a GraphQL server accepts"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"Mutation"),": Specifies all the mutations a GraphQL server accepts"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"Subscription"),": Specifies all the subscriptions a GraphQL server accepts (subscriptions are used for realtime functionality, learn more ",Object(i.b)("a",{parentName:"li",href:"http://graphql.org/blog/subscriptions-in-graphql-and-relay/"},"here"),")")),Object(i.b)("p",null,"To enable the ",Object(i.b)("inlineCode",{parentName:"p"},"feed")," query and ",Object(i.b)("inlineCode",{parentName:"p"},"createPost")," mutation that we saw in the previous examples, you\u2019d have to write the root types as follows:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-graphql"},"type Query {\n  feed: [Post!]!\n}\n\ntype Mutation {\n  createPost(description: String!, imageUrl: String!): Post\n}\n")),Object(i.b)("p",null,"You can read more about the core GraphQL constructs ",Object(i.b)("a",{parentName:"p",href:"https://www.howtographql.com/basics/2-core-concepts/"},"here"),"."),Object(i.b)("h2",{id:"getting-started-with-graphql"},"Getting started with GraphQL"),Object(i.b)("p",null,"Learn how to build a GraphQL server, check out this ",Object(i.b)("a",{parentName:"p",href:"https://www.howtographql.com/graphql-js/0-introduction/"},"tutorial"),"."),Object(i.b)("h2",{id:"next-steps--resources"},"Next Steps & Resources"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"GraphQL server basics"),": Check out this tutorial series about GraphQL servers:",Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",{parentName:"li",href:"https://blog.graph.cool/graphql-server-basics-the-schema-ac5e2950214e"},"GraphQL Server Basics (Part 1): The Schema")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",{parentName:"li",href:"https://blog.graph.cool/graphql-server-basics-the-network-layer-51d97d21861"},"GraphQL Server Basics (Part 2): The Network Layer")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",{parentName:"li",href:"https://blog.graph.cool/graphql-server-basics-demystifying-the-info-argument-in-graphql-resolvers-6f26249f613a"},"GraphQL Server Basics (Part 3): Demystifying the info Argument in GraphQL Resolvers"))))))}c.isMDXComponent=!0}},[["JPGH",1,0]]]);