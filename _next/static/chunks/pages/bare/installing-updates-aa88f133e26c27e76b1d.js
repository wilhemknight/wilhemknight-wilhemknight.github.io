_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[50],{"//Ct":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/bare/installing-updates",function(){return n("hHQ3")}])},hHQ3:function(e,t,n){"use strict";n.r(t),n.d(t,"meta",(function(){return r})),n.d(t,"headings",(function(){return l})),n.d(t,"default",(function(){return c}));var a=n("HALo"),i=n("dhJC"),o=(n("q1tI"),n("7ljp")),p=n("HCau"),s=n("5tZt"),d=["components"],r={title:"Installing expo-updates"},l=[{depth:2,type:"text",title:"Installation"},{depth:2,type:"text",title:"Configuration in JavaScript and JSON"},{depth:2,type:"text",title:"Configuration for iOS"},{depth:2,type:"text",title:"Configuration for Android"},{depth:2,type:"text",title:"Customizing Automatic Setup for iOS"},{depth:2,type:"text",title:"Customizing Automatic Setup for Android"},{depth:2,type:"text",title:"Usage"}],u={meta:r,headings:l};function c(e){var t=e.components,n=Object(i.a)(e,d);return Object(o.b)("wrapper",Object(a.a)({},u,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"expo-updates fetches and manages updates to your app stored on a remote server."),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},"\ud83d\udca1 If you are creating a new project, we recommend using ",Object(o.b)("inlineCode",{parentName:"p"},"npx create-react-native-app")," instead of ",Object(o.b)("inlineCode",{parentName:"p"},"npx react-native init")," because it will handle the following configuration for you automatically.")),Object(o.b)("h2",{id:"installation"},"Installation"),Object(o.b)("p",null,"Like most Expo modules, ",Object(o.b)("strong",{parentName:"p"},"this package requires that you have already ",Object(o.b)("a",{parentName:"strong",href:"/../../../../../../bare/installing-expo-modules/"},"installed and configured Expo modules"),". Be sure to install it before continuing.")),Object(o.b)(p.b,{packageName:"expo-updates",cmd:["npm install expo-updates","npx pod-install"],hideBareInstructions:!0,mdxType:"InstallSection"}),Object(o.b)("br",null),Object(o.b)("p",null,"Once installation is complete, apply the changes from the following diffs to configure expo-updates in your project. This is expected to take about five minutes, and you may need to adapt it slightly depending on how customized your project is."),Object(o.b)("h2",{id:"configuration-in-javascript-and-json"},"Configuration in JavaScript and JSON"),Object(o.b)("p",null,"We need to modify ",Object(o.b)("strong",{parentName:"p"},"index.js")," to import ",Object(o.b)("inlineCode",{parentName:"p"},"expo-asset")," early in your app, in order to be able to update assets with updates. We'll also need to update ",Object(o.b)("strong",{parentName:"p"},"metro.config.js")," for the same reason. And we'll need to add some Expo-specific configuration to ",Object(o.b)("strong",{parentName:"p"},"app.json"),"."),Object(o.b)(s.a,{source:"/static/diffs/expo-updates-js.diff",mdxType:"ConfigurationDiff"}),Object(o.b)("details",null,Object(o.b)("summary",null,Object(o.b)("h4",null,"\ud83d\udca1 What is the SDK version field for?")),Object(o.b)("p",null,Object(o.b)("p",null,"Currently, all apps published to Expo's servers must be configured with a valid SDK version. We use the SDK version to determine which app binaries a particular update is compatible with. If your app has the ",Object(o.b)("inlineCode",{parentName:"p"},"expo")," package installed in package.json, your SDK version should match the major version number of this package. Otherwise, you can just use the latest Expo SDK version number (at least ",Object(o.b)("inlineCode",{parentName:"p"},"38.0.0"),")."))),Object(o.b)("div",{style:{marginTop:-10}}),Object(o.b)("details",null,Object(o.b)("summary",null,Object(o.b)("h4",null,"\ud83d\udca1 How do I customize which assets are included in an update bundle?")),Object(o.b)("p",null,Object(o.b)("p",null,"If you have assets (such as images or other media) that are imported in your application code, and you would like these to be downloaded atomically as part of an update, add the ",Object(o.b)("inlineCode",{parentName:"p"},"assetBundlePatterns")," field under the ",Object(o.b)("inlineCode",{parentName:"p"},"expo")," key in your project's app.json. This field should be an array of file glob strings which point to the assets you want bundled. For example: ",Object(o.b)("inlineCode",{parentName:"p"},'"assetBundlePatterns": ["**/*"]')))),Object(o.b)("div",{style:{marginTop:-10}}),Object(o.b)("details",null,Object(o.b)("summary",null,Object(o.b)("h4",null,"\ud83d\udca1 Migrating from an ExpoKit project?")),Object(o.b)("p",null,Object(o.b)("p",null,"If you're migrating from an ExpoKit project to the bare workflow with ",Object(o.b)("inlineCode",{parentName:"p"},"expo-updates"),", remove the ",Object(o.b)("inlineCode",{parentName:"p"},"ios.publishBundlePath"),", ",Object(o.b)("inlineCode",{parentName:"p"},"ios.publishManifestPath"),", ",Object(o.b)("inlineCode",{parentName:"p"},"android.publishBundlePath"),", and ",Object(o.b)("inlineCode",{parentName:"p"},"android.publishManifestPath")," keys from your app.json."))),Object(o.b)("div",{style:{marginTop:40}}),Object(o.b)("h2",{id:"configuration-for-ios"},"Configuration for iOS"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Add the ",Object(o.b)("inlineCode",{parentName:"li"},'"Supporting"')," directory containing ",Object(o.b)("inlineCode",{parentName:"li"},'"Expo.plist"')," to your project in Xcode with the following content.")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">\n<plist version="1.0">\n  <dict>\n    <key>EXUpdatesSDKVersion</key>\n    <string>43.0.0</string>\n    <key>EXUpdatesURL</key>\n    <string>https://exp.host/@my-expo-username/my-app</string>\n  </dict>\n</plist>\n')),Object(o.b)("h2",{id:"configuration-for-android"},"Configuration for Android"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Apply the following change to your AndroidManifest.xml.")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-diff"},'--- a/apps/bare-update/android/app/src/main/AndroidManifest.xml\n+++ b/apps/bare-update/android/app/src/main/AndroidManifest.xml\n@@ -5,6 +5,8 @@\n   <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/>\n   <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>\n   <application android:name=".MainApplication" android:label="@string/app_name" android:icon="@mipmap/ic_launcher" android:roundIcon="@mipmap/ic_launcher_round" android:allowBackup="false" android:theme="@style/AppTheme" android:usesCleartextTraffic="true">\n+    <meta-data android:name="expo.modules.updates.EXPO_UPDATE_URL" android:value="https://exp.host/@my-expo-username/my-app"/>\n+    <meta-data android:name="expo.modules.updates.EXPO_SDK_VERSION" android:value="43.0.0"/>\n     <activity android:name=".MainActivity" android:label="@string/app_name" android:configChanges="keyboard|keyboardHidden|orientation|screenSize|uiMode" android:launchMode="singleTask" android:windowSoftInputMode="adjustResize" android:theme="@style/Theme.App.SplashScreen">\n       <intent-filter>\n         <action android:name="android.intent.action.MAIN"/>\n')),Object(o.b)("h2",{id:"customizing-automatic-setup-for-ios"},"Customizing Automatic Setup for iOS"),Object(o.b)("p",null,"By default, ",Object(o.b)("inlineCode",{parentName:"p"},"expo-updates")," requires no additional setup. If you want to customize the installation, e.g. to enable updates only in some build variants, you can instead follow these manual setup steps and then apply any customizations."),Object(o.b)(s.a,{source:"/static/diffs/expo-updates-ios.diff",mdxType:"ConfigurationDiff"}),Object(o.b)("h2",{id:"customizing-automatic-setup-for-android"},"Customizing Automatic Setup for Android"),Object(o.b)("p",null,"By default, ",Object(o.b)("inlineCode",{parentName:"p"},"expo-updates")," requires no additional setup. If you want to customize the installation, e.g. to enable updates only in some build variants, you can instead follow these manual setup steps and then apply any customizations."),Object(o.b)(s.a,{source:"/static/diffs/expo-updates-android.diff",mdxType:"ConfigurationDiff"}),Object(o.b)("h2",{id:"usage"},"Usage"),Object(o.b)("p",null,"See more information about usage in the ",Object(o.b)("a",{parentName:"p",href:"https://github.com/expo/expo/tree/main/packages/expo-updates/README.md"},"expo-updates README"),"."))}c.isMDXComponent=!0}},[["//Ct",1,0,2,3,6,9,24]]]);